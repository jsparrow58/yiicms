/*
SQLyog 企业版 - MySQL GUI v8.14 
MySQL - 5.6.17 : Database - yii2basic
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`yii2basic` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `yii2basic`;

/*Table structure for table `country` */

DROP TABLE IF EXISTS `country`;

CREATE TABLE `country` (
  `code` char(2) NOT NULL,
  `name` char(52) NOT NULL,
  `population` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `country` */

insert  into `country`(`code`,`name`,`population`) values ('AU','Australia',18886000),('BR','Brazil',170115000),('CA','Canada',1147000),('CN','China',1277558000),('DE','Germany',82164700),('FR','France',59225700),('GB','United Kingdom',59623400),('IN','India',1013662000),('RU','Russia',146934000),('TW','中国台湾',123456789),('US','United States',278357000);

/*Table structure for table `hs_admin` */

DROP TABLE IF EXISTS `hs_admin`;

CREATE TABLE `hs_admin` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '电子邮箱',
  `auth_key` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'auth_key',
  `password_hash` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '密码Hash',
  `password_reset_token` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '密码重置命牌',
  `status` smallint(6) unsigned NOT NULL DEFAULT '0' COMMENT '用户状态',
  `created_at` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '建立日期',
  `updated_at` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '更新日期',
  `last_login_ip` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后登录地址',
  `last_login_time` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后登录时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
  UNIQUE KEY `password_reset_token` (`password_reset_token`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `hs_admin` */

insert  into `hs_admin`(`id`,`email`,`auth_key`,`password_hash`,`password_reset_token`,`status`,`created_at`,`updated_at`,`last_login_ip`,`last_login_time`) values (1,'jjxboy@163.com','','$2y$13$PiChjBWUeTdH5WHy0n6pqe.UHONmOhjzeZ8ef7tt0R9g4/CnUF5qu',NULL,0,1477903278,1477903278,0,0),(2,'jjxboy@sina.com','','$2y$13$/61RRWON09PuMWms4KbwkOXkdifBxRUOrVYP8A8nn65RYJvWzfba2',NULL,1,1477964068,1477964068,0,0),(3,'jsparrow@aliyun.com','58VoQSZpMXHUVEFGDgkfYPkze_mMjq5_','$2y$13$hX0GVqRP4E0uDGiJ7oopIOdc/fEGeDdYvvqSQoTUTseGV1/8JTBdq',NULL,1,1477964331,1477964331,0,0),(4,'jjxboy@hotmail.com','E-f90-U8VLhAmLBlOlVd5WbApXDU1Yf8','$2y$13$K6gW9BKWvJUT42IdB1GaRuLxPRCSbTO7dOFypQP7FOyBf2wEKMjp2',NULL,1,1477964954,1477964954,0,0),(5,'win.garment@gmail.com','tYB87x83uh-ctJ82-O6mexBsW834JXy6','$2y$13$mv/QAlVxuNnp8/e/oEsVMem9ztxz9d3kJ9izcJ6wChn.uz3CnLgWK',NULL,0,1477968125,1477968125,0,0);

/*Table structure for table `hs_admin_login` */

DROP TABLE IF EXISTS `hs_admin_login`;

CREATE TABLE `hs_admin_login` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户id',
  `client_ip` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '登陆地址',
  `client_time` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '登陆时间',
  `login_status` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '登陆状态',
  PRIMARY KEY (`id`),
  KEY `fk_adminlogin_uid_admin_id` (`uid`),
  CONSTRAINT `fk_adminlogin_uid_admin_id` FOREIGN KEY (`uid`) REFERENCES `hs_admin` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `hs_admin_login` */

/*Table structure for table `hs_category` */

DROP TABLE IF EXISTS `hs_category`;

CREATE TABLE `hs_category` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `pid` int(10) unsigned DEFAULT NULL COMMENT '父栏目',
  `postion` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '排序',
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '标题',
  `hide` tinyint(1) NOT NULL DEFAULT '0' COMMENT '是否隐藏',
  `image` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '图片',
  `icon` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '图标',
  `status` smallint(1) NOT NULL DEFAULT '0' COMMENT '状态',
  PRIMARY KEY (`id`),
  KEY `fk_category_pid_category_id` (`pid`),
  CONSTRAINT `fk_category_pid_category_id` FOREIGN KEY (`pid`) REFERENCES `hs_category` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `hs_category` */

insert  into `hs_category`(`id`,`pid`,`postion`,`title`,`hide`,`image`,`icon`,`status`) values (2,NULL,0,'PHP',0,'','',0),(3,NULL,0,'HTML',0,'','',0);

/*Table structure for table `hs_comment` */

DROP TABLE IF EXISTS `hs_comment`;

CREATE TABLE `hs_comment` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `content` text COLLATE utf8_unicode_ci NOT NULL COMMENT '评论内容',
  `status` smallint(1) unsigned NOT NULL DEFAULT '0' COMMENT '评论状态',
  `postid` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '文章id',
  `uid` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户id',
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '电子邮箱',
  `client_ip` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户ip',
  `client_time` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '发表时间',
  PRIMARY KEY (`id`),
  KEY `fk_comment_postid_post_id` (`postid`),
  KEY `fk_comment_uid_user_id` (`uid`),
  CONSTRAINT `fk_comment_postid_post_id` FOREIGN KEY (`postid`) REFERENCES `hs_post` (`id`),
  CONSTRAINT `fk_comment_uid_user_id` FOREIGN KEY (`uid`) REFERENCES `hs_user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `hs_comment` */

/*Table structure for table `hs_log` */

DROP TABLE IF EXISTS `hs_log`;

CREATE TABLE `hs_log` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `level` varchar(20) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '日志级别',
  `content` text COLLATE utf8_unicode_ci NOT NULL COMMENT '日志内容',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `hs_log` */

/*Table structure for table `hs_login` */

DROP TABLE IF EXISTS `hs_login`;

CREATE TABLE `hs_login` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '用户id',
  `client_ip` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '登陆地址',
  `client_time` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '登陆时间',
  `login_status` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '登陆状态',
  PRIMARY KEY (`id`),
  KEY `fk_login_uid_user_id` (`uid`),
  CONSTRAINT `fk_login_uid_user_id` FOREIGN KEY (`uid`) REFERENCES `hs_user` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `hs_login` */

/*Table structure for table `hs_migration` */

DROP TABLE IF EXISTS `hs_migration`;

CREATE TABLE `hs_migration` (
  `version` varchar(180) NOT NULL,
  `apply_time` int(11) DEFAULT NULL,
  PRIMARY KEY (`version`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `hs_migration` */

insert  into `hs_migration`(`version`,`apply_time`) values ('m000000_000000_base',1477557803),('m161021_065427_create_tbl_hs_user',1477557812);

/*Table structure for table `hs_post` */

DROP TABLE IF EXISTS `hs_post`;

CREATE TABLE `hs_post` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `category` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '所属栏目',
  `title` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '标题',
  `summary` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '摘要',
  `content` text COLLATE utf8_unicode_ci NOT NULL COMMENT '内容',
  `author_id` int(10) unsigned DEFAULT '0' COMMENT '作者',
  `created_at` int(10) unsigned DEFAULT '0' COMMENT '发表日期',
  `updated_id` int(10) unsigned DEFAULT '0' COMMENT '更新用户',
  `updated_at` int(10) unsigned DEFAULT '0' COMMENT '更新日期',
  `status` smallint(1) DEFAULT '0' COMMENT '博文状态',
  `label_img` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '博客图标',
  PRIMARY KEY (`id`),
  KEY `fk_post_cid_category_id` (`category`),
  KEY `fk_post_authorid_admin_id` (`author_id`),
  KEY `fk_post_updatedId_admin_id` (`updated_id`),
  CONSTRAINT `fk_post_authorid_admin_id` FOREIGN KEY (`author_id`) REFERENCES `hs_admin` (`id`),
  CONSTRAINT `fk_post_cid_category_id` FOREIGN KEY (`category`) REFERENCES `hs_category` (`id`),
  CONSTRAINT `fk_post_updatedId_admin_id` FOREIGN KEY (`updated_id`) REFERENCES `hs_admin` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `hs_post` */

insert  into `hs_post`(`id`,`category`,`title`,`summary`,`content`,`author_id`,`created_at`,`updated_id`,`updated_at`,`status`,`label_img`) values (1,2,'11111','恭恭敬敬基本原顶替现在时间','<p>恭恭敬敬基本原顶替现在时间</p>',1,1478147309,1,1478147309,0,'/image/20161103/1478146529804651.jpg'),(2,2,'11111','恭恭敬敬基本原顶替现在时间','<p>恭恭敬敬基本原顶替现在时间</p>',1,1478147383,1,1478147383,0,'/image/20161103/1478146529804651.jpg'),(3,2,'222222','我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人','<p>我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？我是一个好人，你认为呢？</p>',1,1478147434,1,1478147434,0,'/image/20161103/1478147410108332.jpg'),(9,2,'测试文章','hello world','<p>hello world</p>',1,1478150434,1,1478150434,0,'/image/20161103/1478149701667465.jpg'),(10,2,'测试文章','首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接yii2博客项目笔记（一）。初步分析由于 post 和 tag 表为多对多关系','<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接&nbsp;<a href=\"http://www.yii-china.com/post/detail/408.html\" target=\"_blank\" style=\"box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); text-decoration: none; outline: none; cursor: pointer;\">yii2博客项目笔记（一）</a>。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">初步分析</h3><ul class=\" list-paddingleft-2\" style=\"box-sizing: border-box; margin-bottom: 10px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\"><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">由于 post 和 tag 表为多对多关系，所以需要建立中间表 post_tag_pivot 。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">tag 支持上传标签图片。涉及文件上传。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">新建和修改 post 时支持添加和修改 tag ，采用多项复选框。</p></li></ul><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">教程开始</h3><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">一、数据表的建立</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create tags</code>&nbsp;创建 Tags 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_013927_tags&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%tags}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;$this-&gt;string()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//标签名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;//标签描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;&nbsp;//标签图片\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create post_tag_pivot</code>&nbsp;创建 post_tag_pivot 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_014008_post_tag_pivot&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%post_tag_pivot}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//对应posts表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;//对应tags表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-post_id&#39;,&nbsp;&nbsp;&nbsp;//建立索引的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的键\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//同上\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-tag_id&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">数据表就建立完成了。</p><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">二、tags 表的增删改查</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">打开 Gii 工具。选择 Model Generator。依次建立 tags 和 post_tag_pivot 模型。Namespace 选择 common\\models。之后修改 common\\models 文件夹下 tags 文件内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;common\\models;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;yii\\behaviors\\TimestampBehavior;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\n/**\r\n&nbsp;*&nbsp;This&nbsp;is&nbsp;the&nbsp;model&nbsp;class&nbsp;for&nbsp;table&nbsp;&quot;tags&quot;.\r\n&nbsp;*\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$id\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$meta_description\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag_img\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$created_at\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$updated_at\r\n&nbsp;*/\r\nclass&nbsp;Tags&nbsp;extends&nbsp;\\yii\\db\\ActiveRecord\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;tableName()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#39;tags&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimestampBehavior::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;],&nbsp;&#39;required&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;,&nbsp;&#39;meta_description&#39;,&nbsp;&#39;tag_img&#39;],&nbsp;&#39;string&#39;,&nbsp;&#39;max&#39;&nbsp;=&gt;&nbsp;255],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;attributeLabels()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;ID&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;&#39;Tag&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;&#39;Meta&nbsp;Description&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;&#39;Tag&nbsp;Img&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;layout&#39;&nbsp;=&gt;&nbsp;&#39;Layout&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;&#39;Created&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;&#39;Updated&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;TagsQuery&nbsp;the&nbsp;active&nbsp;query&nbsp;used&nbsp;by&nbsp;this&nbsp;AR&nbsp;class.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getPosts()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Posts::className(),[&#39;id&#39;=&gt;&#39;post_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;tag_id&#39;=&gt;&#39;id&#39;])-&gt;where([&#39;status&#39;=&gt;1]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">添加&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">TimestampBehavior</code>&nbsp;行为就不多说了，第一篇有讲。 这里还添加了一个&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">getPosts()</code>方法，作用是通过中间表，从tags 表中查询 posts信息，详细了解看手册关于 ActiveRecord（活动记录）部分。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">选择CRUD Generator，生成 tags 表的增删改查。不需要生成 post_tag_pivot 表的增删改查。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">标签上传功能的实现。</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 backend\\models 目录下，新建 TagFrom 模型，作为 tag_img 文件上传的模型，内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/**\r\n&nbsp;*&nbsp;@Author:&nbsp;Admin\r\n&nbsp;*&nbsp;@Date:&nbsp;&nbsp;&nbsp;2016-08-18&nbsp;13:04:17\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;by:&nbsp;&nbsp;&nbsp;Admin\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;time:&nbsp;2016-08-23&nbsp;15:50:54\r\n&nbsp;*&nbsp;@version\r\n&nbsp;*/\r\nnamespace&nbsp;backend\\models;\r\n\r\nuse&nbsp;yii\\base\\Model;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\nclass&nbsp;TagForm&nbsp;extends&nbsp;Model\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;UploadedFile\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$tag;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$meta_description;\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$tag_img;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$layout;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag_img&#39;],&nbsp;&#39;file&#39;,&nbsp;&#39;skipOnEmpty&#39;&nbsp;=&gt;&nbsp;false,&nbsp;&#39;extensions&#39;&nbsp;=&gt;&nbsp;&#39;png,&nbsp;jpg&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;upload()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;validate())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randName=date(&quot;Y&quot;).date(&quot;m&quot;).date(&quot;d&quot;).date(&quot;H&quot;).date(&quot;i&quot;).date(&quot;s&quot;).rand(100,&nbsp;999).&#39;-&#39;.md5(microtime());&nbsp;&nbsp;&nbsp;//生成随机文件名\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadPath=&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$randName&nbsp;.&nbsp;&#39;.&#39;&nbsp;.&nbsp;$this-&gt;tag_img-&gt;extension;&nbsp;&nbsp;//设置保存路径，&nbsp;为&nbsp;backend\\web\\uploads\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;tag_img-&gt;saveAs($uploadPath);&nbsp;&nbsp;//保存文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Url::to(&#39;advanced/backend/web/&#39;.$uploadPath,true);&nbsp;//返回文件的&nbsp;url&nbsp;路径，使用&nbsp;Url&nbsp;帮助类。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改 backend\\controllers 目录下 TagController.php 文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;backend\\models\\TagSearch;\r\nuse&nbsp;backend\\models\\TagForm;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n/**\r\n&nbsp;*&nbsp;TagController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Tags&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;TagController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Tags&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;TagSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Tags();&nbsp;&nbsp;//新建&nbsp;Tags&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;$this-&gt;findModel($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=&nbsp;new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Tags&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;Tags&nbsp;the&nbsp;loaded&nbsp;model\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NotFoundHttpException&nbsp;if&nbsp;the&nbsp;model&nbsp;cannot&nbsp;be&nbsp;found\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;findModel($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(($model&nbsp;=&nbsp;Tags::findOne($id))&nbsp;!==&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$model;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;NotFoundHttpException(&#39;The&nbsp;requested&nbsp;page&nbsp;does&nbsp;not&nbsp;exist.&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;save($request,$model,$uploadImg)&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;自定义函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($request-&gt;isPost)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;$request-&gt;post(&#39;Tags&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag&nbsp;=&nbsp;$tag[&#39;tag&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;meta_description&nbsp;=&nbsp;$tag[&#39;meta_description&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($uploadImg-&gt;tag_img=&nbsp;UploadedFile::getInstance($uploadImg,&nbsp;&#39;tag_img&#39;)){&nbsp;&nbsp;&nbsp;//&nbsp;调用&nbsp;&nbsp;UploadedFile&nbsp;获得上传文件实例传递给&nbsp;&nbsp;&nbsp;$uploadImg-&gt;tag_img\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($uploadPath&nbsp;=&nbsp;$uploadImg-&gt;upload())&nbsp;&nbsp;&nbsp;//上传文件，返回文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag_img&nbsp;=&nbsp;$uploadPath;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;save())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改视图文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\_form.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\nuse&nbsp;yii\\widgets\\ActiveForm;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n/*&nbsp;@var&nbsp;$form&nbsp;yii\\widgets\\ActiveForm&nbsp;*/\r\n?&gt;\r\n\r\n&lt;div&nbsp;class=&quot;tags-form&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;$form&nbsp;=&nbsp;ActiveForm::begin([&#39;options&#39;&nbsp;=&gt;&nbsp;[&#39;enctype&#39;&nbsp;=&gt;&nbsp;&#39;multipart/form-data&#39;]]);&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;tag&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;meta_description&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($uploadImg,&nbsp;&#39;tag_img&#39;)-&gt;fileInput()&nbsp;?&gt;&nbsp;&nbsp;&nbsp;&nbsp;//文件输入框\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;layout&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;form-group&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;Html::submitButton($model-&gt;isNewRecord&nbsp;?&nbsp;&#39;Create&#39;&nbsp;:&nbsp;&#39;Update&#39;,&nbsp;[&#39;class&#39;&nbsp;=&gt;&nbsp;$model-&gt;isNewRecord&nbsp;?&nbsp;&#39;btn&nbsp;btn-success&#39;&nbsp;:&nbsp;&#39;btn&nbsp;btn-primary&#39;])&nbsp;?&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;ActiveForm::end();&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\create.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Create&nbsp;Tags&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-create&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\update.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Update&nbsp;Tags:&nbsp;&#39;&nbsp;.&nbsp;$model-&gt;id;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;$model-&gt;id,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;&#39;Update&#39;;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-update&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">前台建立 Tag 显示</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着在 Gii 选择 Controller Generator。Controller Class 填写 frontend\\controllers\\TagController 。 View Path 填写 @frontend/views/tag。生成控制器文件。<br style=\"box-sizing: border-box;\"/>接着打开 frontend\\controllers\\TagController.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;frontend\\controllers;\r\n\r\nuse&nbsp;common\\models\\Tags;\r\nclass&nbsp;TagController&nbsp;extends&nbsp;\\yii\\web\\Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&#39;tags&#39;=&gt;$tags]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在修改 frontend\\controllers\\view\\tag\\index.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;标签&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;标签&lt;/h1&gt;\r\n\r\n\r\n&lt;div&nbsp;class=&quot;row&quot;&gt;\r\n&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n?&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;col-md-3&quot;&gt;\r\n&nbsp;&nbsp;	&lt;div&nbsp;class=&quot;media&quot;&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-left&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;#&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=&quot;media-object&quot;&nbsp;width=&quot;54px&quot;&nbsp;height=&quot;54px&quot;&nbsp;src=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag_img&quot;;&nbsp;?&gt;&quot;&nbsp;alt=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-body&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h4&nbsp;class=&quot;media-heading&quot;&gt;&lt;a&nbsp;href=&quot;&lt;?php&nbsp;echo&nbsp;Url::toRoute([&#39;post/index&#39;,&#39;id&#39;=&gt;$tags-&gt;id]);&nbsp;?&gt;&quot;&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&lt;/a&gt;&lt;/h4&gt;&nbsp;&nbsp;//设置&nbsp;Url&nbsp;，点击标签名时，显示该标签所有的文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;meta_description&quot;;&nbsp;?&gt;&lt;/p&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;?php&nbsp;}&nbsp;?&gt;\r\n&lt;/div&gt;</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着修改 frontend\\controllers\\PostController.php 文件的 actionIndex 方法如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">	public&nbsp;function&nbsp;actionIndex($id=&#39;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty($id))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=Tags::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;$tags-&gt;getPosts()-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);&nbsp;&nbsp;&nbsp;//根据标签&nbsp;Id&nbsp;查找所有&nbsp;Post\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;Posts::find()-&gt;where([&#39;status&#39;&nbsp;=&gt;&nbsp;1])-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);\r\n;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$countuPosts&nbsp;=&nbsp;clone&nbsp;$posts&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pages&nbsp;=&nbsp;new&nbsp;Pagination([&#39;totalCount&#39;&nbsp;=&gt;&nbsp;$countuPosts-&gt;count(),&#39;pageSize&#39;=&gt;5]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$models&nbsp;=&nbsp;$posts-&gt;offset($pages-&gt;offset)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;limit($pages-&gt;limit)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;all();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;models&#39;&nbsp;=&gt;&nbsp;$models,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;pages&#39;&nbsp;=&gt;&nbsp;$pages,\r\n&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在文章详情页显示标签</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n$this-&gt;title&nbsp;=&nbsp;$post-&gt;title;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Posts&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;&lt;?php&nbsp;echo&nbsp;&nbsp;$post-&gt;title;&nbsp;?&gt;&lt;/h1&gt;\r\n&lt;p&nbsp;class=&quot;text-muted&quot;&gt;作者：&lt;?php&nbsp;echo&nbsp;$post-&gt;author;&nbsp;?&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;标签:&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n	echo&nbsp;&quot;&lt;kbd&gt;&quot;.$tags[&#39;tag&#39;].&quot;&lt;/kbd&gt;&amp;nbsp;&amp;nbsp;&quot;;\r\n}&nbsp;?&gt;&lt;/p&gt;\r\n&lt;p&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;echo&nbsp;yii\\helpers\\Markdown::process($post-&gt;content,&nbsp;&#39;gfm&#39;);&nbsp;?&gt;\r\n&lt;/p&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">新建 post 表时添加 tag</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 common\\models\\Posts.php 下添加 getTags 方法 中间表查询。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&nbsp;public&nbsp;function&nbsp;getTags()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Tags::className(),[&#39;id&#39;=&gt;&#39;tag_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;post_id&#39;=&gt;&#39;id&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">修改 backend\\controllers\\PostContrlloer.php 内容如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Posts;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;common\\models\\PostTagPivot;\r\nuse&nbsp;backend\\models\\PostsSearch;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\n\r\n/**\r\n&nbsp;*&nbsp;PostController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Posts&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;PostController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionSeeder(){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$faker&nbsp;=&nbsp;\\Faker\\Factory::create(&#39;zh_CN&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a=0;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i=0;&nbsp;$i&nbsp;&lt;20&nbsp;;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;title&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;20);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;author&nbsp;=&nbsp;$faker-&gt;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;content&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;3000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($posts-&gt;insert())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a+=1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;添加&quot;.$a.&quot;条数据&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Posts&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;PostsSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()&nbsp;&nbsp;//创建&nbsp;post&nbsp;时，查找所有标签，提供选择\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();&nbsp;&nbsp;//查找所有标签\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=&quot;&quot;;&nbsp;&nbsp;//已选择的标签，由于新建标签所以&nbsp;&nbsp;$checkTags&nbsp;为空。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($model-&gt;attributes[&#39;id&#39;],$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//新建&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,&nbsp;&nbsp;//传递所有标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,&nbsp;//传递已选择标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)&nbsp;&nbsp;&nbsp;//修改&nbsp;post&nbsp;时，查找所有标签，并查找改&nbsp;post&nbsp;的&nbsp;tag&nbsp;传到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;Posts::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTag&nbsp;=&nbsp;&nbsp;$model-&gt;tags;&nbsp;&nbsp;//根据&nbsp;post&nbsp;的&nbsp;id&nbsp;查找已选择的&nbsp;tag\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=array();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;$checkTag&nbsp;as&nbsp;$checkTag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags[]=$checkTag-&gt;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//把查找到的&nbsp;$checkTag&nbsp;提取出已选择&nbsp;tag&nbsp;的&nbsp;id。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($id,$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//修改&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag&nbsp;保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;saveTag($id,$checkTag)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostTagPivot::deleteAll(&quot;post_id&nbsp;=&nbsp;$id&quot;);&nbsp;&nbsp;&nbsp;//首先根据&nbsp;post&nbsp;的&nbsp;id&nbsp;删除&nbsp;Post_Tag_Pivot&nbsp;表建立的关系\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($checkTag)&nbsp;{&nbsp;&nbsp;&nbsp;//根据前台传回来的选择写入数据库。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($checkTag&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot&nbsp;=&nbsp;new&nbsp;PostTagPivot();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;post_id&nbsp;=&nbsp;$id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;tag_id&nbsp;=&nbsp;$value;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;insert();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Posts&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nb',1,1478150530,1,1478150530,0,'/image/20161103/1478150474896136.jpg'),(11,2,'测试测试','首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接yii2博客项目笔记（一）。初步分析由于 post 和 tag 表为多对多关系','<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接&nbsp;<a href=\"http://www.yii-china.com/post/detail/408.html\" target=\"_blank\" style=\"box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); text-decoration: none; outline: none; cursor: pointer;\">yii2博客项目笔记（一）</a>。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">初步分析</h3><ul class=\" list-paddingleft-2\" style=\"box-sizing: border-box; margin-bottom: 10px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\"><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">由于 post 和 tag 表为多对多关系，所以需要建立中间表 post_tag_pivot 。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">tag 支持上传标签图片。涉及文件上传。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">新建和修改 post 时支持添加和修改 tag ，采用多项复选框。</p></li></ul><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">教程开始</h3><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">一、数据表的建立</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create tags</code>&nbsp;创建 Tags 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_013927_tags&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%tags}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;$this-&gt;string()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//标签名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;//标签描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;&nbsp;//标签图片\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create post_tag_pivot</code>&nbsp;创建 post_tag_pivot 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_014008_post_tag_pivot&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%post_tag_pivot}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//对应posts表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;//对应tags表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-post_id&#39;,&nbsp;&nbsp;&nbsp;//建立索引的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的键\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//同上\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-tag_id&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">数据表就建立完成了。</p><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">二、tags 表的增删改查</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">打开 Gii 工具。选择 Model Generator。依次建立 tags 和 post_tag_pivot 模型。Namespace 选择 common\\models。之后修改 common\\models 文件夹下 tags 文件内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;common\\models;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;yii\\behaviors\\TimestampBehavior;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\n/**\r\n&nbsp;*&nbsp;This&nbsp;is&nbsp;the&nbsp;model&nbsp;class&nbsp;for&nbsp;table&nbsp;&quot;tags&quot;.\r\n&nbsp;*\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$id\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$meta_description\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag_img\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$created_at\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$updated_at\r\n&nbsp;*/\r\nclass&nbsp;Tags&nbsp;extends&nbsp;\\yii\\db\\ActiveRecord\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;tableName()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#39;tags&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimestampBehavior::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;],&nbsp;&#39;required&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;,&nbsp;&#39;meta_description&#39;,&nbsp;&#39;tag_img&#39;],&nbsp;&#39;string&#39;,&nbsp;&#39;max&#39;&nbsp;=&gt;&nbsp;255],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;attributeLabels()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;ID&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;&#39;Tag&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;&#39;Meta&nbsp;Description&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;&#39;Tag&nbsp;Img&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;layout&#39;&nbsp;=&gt;&nbsp;&#39;Layout&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;&#39;Created&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;&#39;Updated&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;TagsQuery&nbsp;the&nbsp;active&nbsp;query&nbsp;used&nbsp;by&nbsp;this&nbsp;AR&nbsp;class.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getPosts()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Posts::className(),[&#39;id&#39;=&gt;&#39;post_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;tag_id&#39;=&gt;&#39;id&#39;])-&gt;where([&#39;status&#39;=&gt;1]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">添加&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">TimestampBehavior</code>&nbsp;行为就不多说了，第一篇有讲。 这里还添加了一个&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">getPosts()</code>方法，作用是通过中间表，从tags 表中查询 posts信息，详细了解看手册关于 ActiveRecord（活动记录）部分。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">选择CRUD Generator，生成 tags 表的增删改查。不需要生成 post_tag_pivot 表的增删改查。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">标签上传功能的实现。</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 backend\\models 目录下，新建 TagFrom 模型，作为 tag_img 文件上传的模型，内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/**\r\n&nbsp;*&nbsp;@Author:&nbsp;Admin\r\n&nbsp;*&nbsp;@Date:&nbsp;&nbsp;&nbsp;2016-08-18&nbsp;13:04:17\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;by:&nbsp;&nbsp;&nbsp;Admin\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;time:&nbsp;2016-08-23&nbsp;15:50:54\r\n&nbsp;*&nbsp;@version\r\n&nbsp;*/\r\nnamespace&nbsp;backend\\models;\r\n\r\nuse&nbsp;yii\\base\\Model;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\nclass&nbsp;TagForm&nbsp;extends&nbsp;Model\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;UploadedFile\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$tag;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$meta_description;\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$tag_img;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$layout;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag_img&#39;],&nbsp;&#39;file&#39;,&nbsp;&#39;skipOnEmpty&#39;&nbsp;=&gt;&nbsp;false,&nbsp;&#39;extensions&#39;&nbsp;=&gt;&nbsp;&#39;png,&nbsp;jpg&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;upload()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;validate())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randName=date(&quot;Y&quot;).date(&quot;m&quot;).date(&quot;d&quot;).date(&quot;H&quot;).date(&quot;i&quot;).date(&quot;s&quot;).rand(100,&nbsp;999).&#39;-&#39;.md5(microtime());&nbsp;&nbsp;&nbsp;//生成随机文件名\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadPath=&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$randName&nbsp;.&nbsp;&#39;.&#39;&nbsp;.&nbsp;$this-&gt;tag_img-&gt;extension;&nbsp;&nbsp;//设置保存路径，&nbsp;为&nbsp;backend\\web\\uploads\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;tag_img-&gt;saveAs($uploadPath);&nbsp;&nbsp;//保存文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Url::to(&#39;advanced/backend/web/&#39;.$uploadPath,true);&nbsp;//返回文件的&nbsp;url&nbsp;路径，使用&nbsp;Url&nbsp;帮助类。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改 backend\\controllers 目录下 TagController.php 文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;backend\\models\\TagSearch;\r\nuse&nbsp;backend\\models\\TagForm;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n/**\r\n&nbsp;*&nbsp;TagController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Tags&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;TagController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Tags&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;TagSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Tags();&nbsp;&nbsp;//新建&nbsp;Tags&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;$this-&gt;findModel($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=&nbsp;new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Tags&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;Tags&nbsp;the&nbsp;loaded&nbsp;model\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NotFoundHttpException&nbsp;if&nbsp;the&nbsp;model&nbsp;cannot&nbsp;be&nbsp;found\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;findModel($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(($model&nbsp;=&nbsp;Tags::findOne($id))&nbsp;!==&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$model;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;NotFoundHttpException(&#39;The&nbsp;requested&nbsp;page&nbsp;does&nbsp;not&nbsp;exist.&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;save($request,$model,$uploadImg)&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;自定义函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($request-&gt;isPost)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;$request-&gt;post(&#39;Tags&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag&nbsp;=&nbsp;$tag[&#39;tag&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;meta_description&nbsp;=&nbsp;$tag[&#39;meta_description&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($uploadImg-&gt;tag_img=&nbsp;UploadedFile::getInstance($uploadImg,&nbsp;&#39;tag_img&#39;)){&nbsp;&nbsp;&nbsp;//&nbsp;调用&nbsp;&nbsp;UploadedFile&nbsp;获得上传文件实例传递给&nbsp;&nbsp;&nbsp;$uploadImg-&gt;tag_img\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($uploadPath&nbsp;=&nbsp;$uploadImg-&gt;upload())&nbsp;&nbsp;&nbsp;//上传文件，返回文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag_img&nbsp;=&nbsp;$uploadPath;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;save())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改视图文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\_form.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\nuse&nbsp;yii\\widgets\\ActiveForm;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n/*&nbsp;@var&nbsp;$form&nbsp;yii\\widgets\\ActiveForm&nbsp;*/\r\n?&gt;\r\n\r\n&lt;div&nbsp;class=&quot;tags-form&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;$form&nbsp;=&nbsp;ActiveForm::begin([&#39;options&#39;&nbsp;=&gt;&nbsp;[&#39;enctype&#39;&nbsp;=&gt;&nbsp;&#39;multipart/form-data&#39;]]);&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;tag&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;meta_description&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($uploadImg,&nbsp;&#39;tag_img&#39;)-&gt;fileInput()&nbsp;?&gt;&nbsp;&nbsp;&nbsp;&nbsp;//文件输入框\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;layout&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;form-group&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;Html::submitButton($model-&gt;isNewRecord&nbsp;?&nbsp;&#39;Create&#39;&nbsp;:&nbsp;&#39;Update&#39;,&nbsp;[&#39;class&#39;&nbsp;=&gt;&nbsp;$model-&gt;isNewRecord&nbsp;?&nbsp;&#39;btn&nbsp;btn-success&#39;&nbsp;:&nbsp;&#39;btn&nbsp;btn-primary&#39;])&nbsp;?&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;ActiveForm::end();&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\create.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Create&nbsp;Tags&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-create&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\update.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Update&nbsp;Tags:&nbsp;&#39;&nbsp;.&nbsp;$model-&gt;id;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;$model-&gt;id,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;&#39;Update&#39;;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-update&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">前台建立 Tag 显示</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着在 Gii 选择 Controller Generator。Controller Class 填写 frontend\\controllers\\TagController 。 View Path 填写 @frontend/views/tag。生成控制器文件。<br style=\"box-sizing: border-box;\"/>接着打开 frontend\\controllers\\TagController.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;frontend\\controllers;\r\n\r\nuse&nbsp;common\\models\\Tags;\r\nclass&nbsp;TagController&nbsp;extends&nbsp;\\yii\\web\\Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&#39;tags&#39;=&gt;$tags]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在修改 frontend\\controllers\\view\\tag\\index.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;标签&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;标签&lt;/h1&gt;\r\n\r\n\r\n&lt;div&nbsp;class=&quot;row&quot;&gt;\r\n&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n?&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;col-md-3&quot;&gt;\r\n&nbsp;&nbsp;	&lt;div&nbsp;class=&quot;media&quot;&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-left&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;#&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=&quot;media-object&quot;&nbsp;width=&quot;54px&quot;&nbsp;height=&quot;54px&quot;&nbsp;src=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag_img&quot;;&nbsp;?&gt;&quot;&nbsp;alt=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-body&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h4&nbsp;class=&quot;media-heading&quot;&gt;&lt;a&nbsp;href=&quot;&lt;?php&nbsp;echo&nbsp;Url::toRoute([&#39;post/index&#39;,&#39;id&#39;=&gt;$tags-&gt;id]);&nbsp;?&gt;&quot;&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&lt;/a&gt;&lt;/h4&gt;&nbsp;&nbsp;//设置&nbsp;Url&nbsp;，点击标签名时，显示该标签所有的文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;meta_description&quot;;&nbsp;?&gt;&lt;/p&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;?php&nbsp;}&nbsp;?&gt;\r\n&lt;/div&gt;</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着修改 frontend\\controllers\\PostController.php 文件的 actionIndex 方法如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">	public&nbsp;function&nbsp;actionIndex($id=&#39;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty($id))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=Tags::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;$tags-&gt;getPosts()-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);&nbsp;&nbsp;&nbsp;//根据标签&nbsp;Id&nbsp;查找所有&nbsp;Post\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;Posts::find()-&gt;where([&#39;status&#39;&nbsp;=&gt;&nbsp;1])-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);\r\n;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$countuPosts&nbsp;=&nbsp;clone&nbsp;$posts&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pages&nbsp;=&nbsp;new&nbsp;Pagination([&#39;totalCount&#39;&nbsp;=&gt;&nbsp;$countuPosts-&gt;count(),&#39;pageSize&#39;=&gt;5]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$models&nbsp;=&nbsp;$posts-&gt;offset($pages-&gt;offset)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;limit($pages-&gt;limit)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;all();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;models&#39;&nbsp;=&gt;&nbsp;$models,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;pages&#39;&nbsp;=&gt;&nbsp;$pages,\r\n&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在文章详情页显示标签</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n$this-&gt;title&nbsp;=&nbsp;$post-&gt;title;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Posts&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;&lt;?php&nbsp;echo&nbsp;&nbsp;$post-&gt;title;&nbsp;?&gt;&lt;/h1&gt;\r\n&lt;p&nbsp;class=&quot;text-muted&quot;&gt;作者：&lt;?php&nbsp;echo&nbsp;$post-&gt;author;&nbsp;?&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;标签:&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n	echo&nbsp;&quot;&lt;kbd&gt;&quot;.$tags[&#39;tag&#39;].&quot;&lt;/kbd&gt;&amp;nbsp;&amp;nbsp;&quot;;\r\n}&nbsp;?&gt;&lt;/p&gt;\r\n&lt;p&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;echo&nbsp;yii\\helpers\\Markdown::process($post-&gt;content,&nbsp;&#39;gfm&#39;);&nbsp;?&gt;\r\n&lt;/p&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">新建 post 表时添加 tag</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 common\\models\\Posts.php 下添加 getTags 方法 中间表查询。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&nbsp;public&nbsp;function&nbsp;getTags()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Tags::className(),[&#39;id&#39;=&gt;&#39;tag_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;post_id&#39;=&gt;&#39;id&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">修改 backend\\controllers\\PostContrlloer.php 内容如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Posts;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;common\\models\\PostTagPivot;\r\nuse&nbsp;backend\\models\\PostsSearch;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\n\r\n/**\r\n&nbsp;*&nbsp;PostController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Posts&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;PostController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionSeeder(){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$faker&nbsp;=&nbsp;\\Faker\\Factory::create(&#39;zh_CN&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a=0;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i=0;&nbsp;$i&nbsp;&lt;20&nbsp;;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;title&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;20);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;author&nbsp;=&nbsp;$faker-&gt;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;content&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;3000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($posts-&gt;insert())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a+=1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;添加&quot;.$a.&quot;条数据&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Posts&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;PostsSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()&nbsp;&nbsp;//创建&nbsp;post&nbsp;时，查找所有标签，提供选择\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();&nbsp;&nbsp;//查找所有标签\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=&quot;&quot;;&nbsp;&nbsp;//已选择的标签，由于新建标签所以&nbsp;&nbsp;$checkTags&nbsp;为空。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($model-&gt;attributes[&#39;id&#39;],$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//新建&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,&nbsp;&nbsp;//传递所有标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,&nbsp;//传递已选择标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)&nbsp;&nbsp;&nbsp;//修改&nbsp;post&nbsp;时，查找所有标签，并查找改&nbsp;post&nbsp;的&nbsp;tag&nbsp;传到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;Posts::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTag&nbsp;=&nbsp;&nbsp;$model-&gt;tags;&nbsp;&nbsp;//根据&nbsp;post&nbsp;的&nbsp;id&nbsp;查找已选择的&nbsp;tag\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=array();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;$checkTag&nbsp;as&nbsp;$checkTag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags[]=$checkTag-&gt;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//把查找到的&nbsp;$checkTag&nbsp;提取出已选择&nbsp;tag&nbsp;的&nbsp;id。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($id,$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//修改&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag&nbsp;保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;saveTag($id,$checkTag)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostTagPivot::deleteAll(&quot;post_id&nbsp;=&nbsp;$id&quot;);&nbsp;&nbsp;&nbsp;//首先根据&nbsp;post&nbsp;的&nbsp;id&nbsp;删除&nbsp;Post_Tag_Pivot&nbsp;表建立的关系\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($checkTag)&nbsp;{&nbsp;&nbsp;&nbsp;//根据前台传回来的选择写入数据库。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($checkTag&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot&nbsp;=&nbsp;new&nbsp;PostTagPivot();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;post_id&nbsp;=&nbsp;$id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;tag_id&nbsp;=&nbsp;$value;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;insert();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Posts&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nb',1,1478150644,1,1478150644,0,'/image/20161103/1478150629775819.jpg'),(12,2,'测试测试测试','首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接yii2博客项目笔记（一）。初步分析由于 post 和 tag 表为多对多关系','<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接&nbsp;<a href=\"http://www.yii-china.com/post/detail/408.html\" target=\"_blank\" style=\"box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); text-decoration: none; outline: none; cursor: pointer;\">yii2博客项目笔记（一）</a>。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">初步分析</h3><ul class=\" list-paddingleft-2\" style=\"box-sizing: border-box; margin-bottom: 10px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\"><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">由于 post 和 tag 表为多对多关系，所以需要建立中间表 post_tag_pivot 。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">tag 支持上传标签图片。涉及文件上传。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">新建和修改 post 时支持添加和修改 tag ，采用多项复选框。</p></li></ul><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">教程开始</h3><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">一、数据表的建立</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create tags</code>&nbsp;创建 Tags 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_013927_tags&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%tags}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;$this-&gt;string()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//标签名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;//标签描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;&nbsp;//标签图片\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create post_tag_pivot</code>&nbsp;创建 post_tag_pivot 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_014008_post_tag_pivot&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%post_tag_pivot}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//对应posts表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;//对应tags表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-post_id&#39;,&nbsp;&nbsp;&nbsp;//建立索引的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的键\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//同上\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-tag_id&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">数据表就建立完成了。</p><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">二、tags 表的增删改查</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">打开 Gii 工具。选择 Model Generator。依次建立 tags 和 post_tag_pivot 模型。Namespace 选择 common\\models。之后修改 common\\models 文件夹下 tags 文件内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;common\\models;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;yii\\behaviors\\TimestampBehavior;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\n/**\r\n&nbsp;*&nbsp;This&nbsp;is&nbsp;the&nbsp;model&nbsp;class&nbsp;for&nbsp;table&nbsp;&quot;tags&quot;.\r\n&nbsp;*\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$id\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$meta_description\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag_img\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$created_at\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$updated_at\r\n&nbsp;*/\r\nclass&nbsp;Tags&nbsp;extends&nbsp;\\yii\\db\\ActiveRecord\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;tableName()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#39;tags&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimestampBehavior::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;],&nbsp;&#39;required&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;,&nbsp;&#39;meta_description&#39;,&nbsp;&#39;tag_img&#39;],&nbsp;&#39;string&#39;,&nbsp;&#39;max&#39;&nbsp;=&gt;&nbsp;255],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;attributeLabels()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;ID&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;&#39;Tag&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;&#39;Meta&nbsp;Description&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;&#39;Tag&nbsp;Img&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;layout&#39;&nbsp;=&gt;&nbsp;&#39;Layout&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;&#39;Created&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;&#39;Updated&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;TagsQuery&nbsp;the&nbsp;active&nbsp;query&nbsp;used&nbsp;by&nbsp;this&nbsp;AR&nbsp;class.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getPosts()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Posts::className(),[&#39;id&#39;=&gt;&#39;post_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;tag_id&#39;=&gt;&#39;id&#39;])-&gt;where([&#39;status&#39;=&gt;1]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">添加&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">TimestampBehavior</code>&nbsp;行为就不多说了，第一篇有讲。 这里还添加了一个&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">getPosts()</code>方法，作用是通过中间表，从tags 表中查询 posts信息，详细了解看手册关于 ActiveRecord（活动记录）部分。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">选择CRUD Generator，生成 tags 表的增删改查。不需要生成 post_tag_pivot 表的增删改查。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">标签上传功能的实现。</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 backend\\models 目录下，新建 TagFrom 模型，作为 tag_img 文件上传的模型，内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/**\r\n&nbsp;*&nbsp;@Author:&nbsp;Admin\r\n&nbsp;*&nbsp;@Date:&nbsp;&nbsp;&nbsp;2016-08-18&nbsp;13:04:17\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;by:&nbsp;&nbsp;&nbsp;Admin\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;time:&nbsp;2016-08-23&nbsp;15:50:54\r\n&nbsp;*&nbsp;@version\r\n&nbsp;*/\r\nnamespace&nbsp;backend\\models;\r\n\r\nuse&nbsp;yii\\base\\Model;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\nclass&nbsp;TagForm&nbsp;extends&nbsp;Model\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;UploadedFile\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$tag;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$meta_description;\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$tag_img;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$layout;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag_img&#39;],&nbsp;&#39;file&#39;,&nbsp;&#39;skipOnEmpty&#39;&nbsp;=&gt;&nbsp;false,&nbsp;&#39;extensions&#39;&nbsp;=&gt;&nbsp;&#39;png,&nbsp;jpg&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;upload()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;validate())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randName=date(&quot;Y&quot;).date(&quot;m&quot;).date(&quot;d&quot;).date(&quot;H&quot;).date(&quot;i&quot;).date(&quot;s&quot;).rand(100,&nbsp;999).&#39;-&#39;.md5(microtime());&nbsp;&nbsp;&nbsp;//生成随机文件名\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadPath=&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$randName&nbsp;.&nbsp;&#39;.&#39;&nbsp;.&nbsp;$this-&gt;tag_img-&gt;extension;&nbsp;&nbsp;//设置保存路径，&nbsp;为&nbsp;backend\\web\\uploads\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;tag_img-&gt;saveAs($uploadPath);&nbsp;&nbsp;//保存文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Url::to(&#39;advanced/backend/web/&#39;.$uploadPath,true);&nbsp;//返回文件的&nbsp;url&nbsp;路径，使用&nbsp;Url&nbsp;帮助类。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改 backend\\controllers 目录下 TagController.php 文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;backend\\models\\TagSearch;\r\nuse&nbsp;backend\\models\\TagForm;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n/**\r\n&nbsp;*&nbsp;TagController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Tags&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;TagController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Tags&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;TagSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Tags();&nbsp;&nbsp;//新建&nbsp;Tags&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;$this-&gt;findModel($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=&nbsp;new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Tags&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;Tags&nbsp;the&nbsp;loaded&nbsp;model\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NotFoundHttpException&nbsp;if&nbsp;the&nbsp;model&nbsp;cannot&nbsp;be&nbsp;found\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;findModel($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(($model&nbsp;=&nbsp;Tags::findOne($id))&nbsp;!==&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$model;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;NotFoundHttpException(&#39;The&nbsp;requested&nbsp;page&nbsp;does&nbsp;not&nbsp;exist.&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;save($request,$model,$uploadImg)&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;自定义函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($request-&gt;isPost)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;$request-&gt;post(&#39;Tags&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag&nbsp;=&nbsp;$tag[&#39;tag&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;meta_description&nbsp;=&nbsp;$tag[&#39;meta_description&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($uploadImg-&gt;tag_img=&nbsp;UploadedFile::getInstance($uploadImg,&nbsp;&#39;tag_img&#39;)){&nbsp;&nbsp;&nbsp;//&nbsp;调用&nbsp;&nbsp;UploadedFile&nbsp;获得上传文件实例传递给&nbsp;&nbsp;&nbsp;$uploadImg-&gt;tag_img\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($uploadPath&nbsp;=&nbsp;$uploadImg-&gt;upload())&nbsp;&nbsp;&nbsp;//上传文件，返回文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag_img&nbsp;=&nbsp;$uploadPath;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;save())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改视图文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\_form.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\nuse&nbsp;yii\\widgets\\ActiveForm;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n/*&nbsp;@var&nbsp;$form&nbsp;yii\\widgets\\ActiveForm&nbsp;*/\r\n?&gt;\r\n\r\n&lt;div&nbsp;class=&quot;tags-form&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;$form&nbsp;=&nbsp;ActiveForm::begin([&#39;options&#39;&nbsp;=&gt;&nbsp;[&#39;enctype&#39;&nbsp;=&gt;&nbsp;&#39;multipart/form-data&#39;]]);&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;tag&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;meta_description&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($uploadImg,&nbsp;&#39;tag_img&#39;)-&gt;fileInput()&nbsp;?&gt;&nbsp;&nbsp;&nbsp;&nbsp;//文件输入框\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;layout&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;form-group&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;Html::submitButton($model-&gt;isNewRecord&nbsp;?&nbsp;&#39;Create&#39;&nbsp;:&nbsp;&#39;Update&#39;,&nbsp;[&#39;class&#39;&nbsp;=&gt;&nbsp;$model-&gt;isNewRecord&nbsp;?&nbsp;&#39;btn&nbsp;btn-success&#39;&nbsp;:&nbsp;&#39;btn&nbsp;btn-primary&#39;])&nbsp;?&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;ActiveForm::end();&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\create.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Create&nbsp;Tags&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-create&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\update.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Update&nbsp;Tags:&nbsp;&#39;&nbsp;.&nbsp;$model-&gt;id;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;$model-&gt;id,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;&#39;Update&#39;;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-update&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">前台建立 Tag 显示</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着在 Gii 选择 Controller Generator。Controller Class 填写 frontend\\controllers\\TagController 。 View Path 填写 @frontend/views/tag。生成控制器文件。<br style=\"box-sizing: border-box;\"/>接着打开 frontend\\controllers\\TagController.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;frontend\\controllers;\r\n\r\nuse&nbsp;common\\models\\Tags;\r\nclass&nbsp;TagController&nbsp;extends&nbsp;\\yii\\web\\Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&#39;tags&#39;=&gt;$tags]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在修改 frontend\\controllers\\view\\tag\\index.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;标签&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;标签&lt;/h1&gt;\r\n\r\n\r\n&lt;div&nbsp;class=&quot;row&quot;&gt;\r\n&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n?&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;col-md-3&quot;&gt;\r\n&nbsp;&nbsp;	&lt;div&nbsp;class=&quot;media&quot;&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-left&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;#&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=&quot;media-object&quot;&nbsp;width=&quot;54px&quot;&nbsp;height=&quot;54px&quot;&nbsp;src=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag_img&quot;;&nbsp;?&gt;&quot;&nbsp;alt=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-body&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h4&nbsp;class=&quot;media-heading&quot;&gt;&lt;a&nbsp;href=&quot;&lt;?php&nbsp;echo&nbsp;Url::toRoute([&#39;post/index&#39;,&#39;id&#39;=&gt;$tags-&gt;id]);&nbsp;?&gt;&quot;&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&lt;/a&gt;&lt;/h4&gt;&nbsp;&nbsp;//设置&nbsp;Url&nbsp;，点击标签名时，显示该标签所有的文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;meta_description&quot;;&nbsp;?&gt;&lt;/p&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;?php&nbsp;}&nbsp;?&gt;\r\n&lt;/div&gt;</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着修改 frontend\\controllers\\PostController.php 文件的 actionIndex 方法如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">	public&nbsp;function&nbsp;actionIndex($id=&#39;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty($id))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=Tags::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;$tags-&gt;getPosts()-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);&nbsp;&nbsp;&nbsp;//根据标签&nbsp;Id&nbsp;查找所有&nbsp;Post\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;Posts::find()-&gt;where([&#39;status&#39;&nbsp;=&gt;&nbsp;1])-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);\r\n;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$countuPosts&nbsp;=&nbsp;clone&nbsp;$posts&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pages&nbsp;=&nbsp;new&nbsp;Pagination([&#39;totalCount&#39;&nbsp;=&gt;&nbsp;$countuPosts-&gt;count(),&#39;pageSize&#39;=&gt;5]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$models&nbsp;=&nbsp;$posts-&gt;offset($pages-&gt;offset)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;limit($pages-&gt;limit)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;all();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;models&#39;&nbsp;=&gt;&nbsp;$models,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;pages&#39;&nbsp;=&gt;&nbsp;$pages,\r\n&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在文章详情页显示标签</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n$this-&gt;title&nbsp;=&nbsp;$post-&gt;title;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Posts&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;&lt;?php&nbsp;echo&nbsp;&nbsp;$post-&gt;title;&nbsp;?&gt;&lt;/h1&gt;\r\n&lt;p&nbsp;class=&quot;text-muted&quot;&gt;作者：&lt;?php&nbsp;echo&nbsp;$post-&gt;author;&nbsp;?&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;标签:&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n	echo&nbsp;&quot;&lt;kbd&gt;&quot;.$tags[&#39;tag&#39;].&quot;&lt;/kbd&gt;&amp;nbsp;&amp;nbsp;&quot;;\r\n}&nbsp;?&gt;&lt;/p&gt;\r\n&lt;p&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;echo&nbsp;yii\\helpers\\Markdown::process($post-&gt;content,&nbsp;&#39;gfm&#39;);&nbsp;?&gt;\r\n&lt;/p&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">新建 post 表时添加 tag</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 common\\models\\Posts.php 下添加 getTags 方法 中间表查询。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&nbsp;public&nbsp;function&nbsp;getTags()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Tags::className(),[&#39;id&#39;=&gt;&#39;tag_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;post_id&#39;=&gt;&#39;id&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">修改 backend\\controllers\\PostContrlloer.php 内容如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Posts;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;common\\models\\PostTagPivot;\r\nuse&nbsp;backend\\models\\PostsSearch;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\n\r\n/**\r\n&nbsp;*&nbsp;PostController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Posts&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;PostController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionSeeder(){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$faker&nbsp;=&nbsp;\\Faker\\Factory::create(&#39;zh_CN&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a=0;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i=0;&nbsp;$i&nbsp;&lt;20&nbsp;;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;title&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;20);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;author&nbsp;=&nbsp;$faker-&gt;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;content&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;3000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($posts-&gt;insert())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a+=1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;添加&quot;.$a.&quot;条数据&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Posts&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;PostsSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()&nbsp;&nbsp;//创建&nbsp;post&nbsp;时，查找所有标签，提供选择\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();&nbsp;&nbsp;//查找所有标签\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=&quot;&quot;;&nbsp;&nbsp;//已选择的标签，由于新建标签所以&nbsp;&nbsp;$checkTags&nbsp;为空。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($model-&gt;attributes[&#39;id&#39;],$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//新建&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,&nbsp;&nbsp;//传递所有标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,&nbsp;//传递已选择标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)&nbsp;&nbsp;&nbsp;//修改&nbsp;post&nbsp;时，查找所有标签，并查找改&nbsp;post&nbsp;的&nbsp;tag&nbsp;传到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;Posts::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTag&nbsp;=&nbsp;&nbsp;$model-&gt;tags;&nbsp;&nbsp;//根据&nbsp;post&nbsp;的&nbsp;id&nbsp;查找已选择的&nbsp;tag\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=array();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;$checkTag&nbsp;as&nbsp;$checkTag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags[]=$checkTag-&gt;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//把查找到的&nbsp;$checkTag&nbsp;提取出已选择&nbsp;tag&nbsp;的&nbsp;id。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($id,$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//修改&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag&nbsp;保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;saveTag($id,$checkTag)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostTagPivot::deleteAll(&quot;post_id&nbsp;=&nbsp;$id&quot;);&nbsp;&nbsp;&nbsp;//首先根据&nbsp;post&nbsp;的&nbsp;id&nbsp;删除&nbsp;Post_Tag_Pivot&nbsp;表建立的关系\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($checkTag)&nbsp;{&nbsp;&nbsp;&nbsp;//根据前台传回来的选择写入数据库。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($checkTag&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot&nbsp;=&nbsp;new&nbsp;PostTagPivot();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;post_id&nbsp;=&nbsp;$id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;tag_id&nbsp;=&nbsp;$value;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;insert();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Posts&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nb',1,1478150863,1,1478150863,0,'/image/20161103/1478150850116525.jpg'),(14,3,'测试文章2','首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接yii2博客项目笔记（一）。初步分析由于 post 和 tag 表为多对多关系','<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接&nbsp;<a href=\"http://www.yii-china.com/post/detail/408.html\" target=\"_blank\" style=\"box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); text-decoration: none; outline: none; cursor: pointer;\">yii2博客项目笔记（一）</a>。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">初步分析</h3><ul class=\" list-paddingleft-2\" style=\"box-sizing: border-box; margin-bottom: 10px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\"><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">由于 post 和 tag 表为多对多关系，所以需要建立中间表 post_tag_pivot 。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">tag 支持上传标签图片。涉及文件上传。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">新建和修改 post 时支持添加和修改 tag ，采用多项复选框。</p></li></ul><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">教程开始</h3><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">一、数据表的建立</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create tags</code>&nbsp;创建 Tags 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_013927_tags&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%tags}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;$this-&gt;string()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//标签名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;//标签描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;&nbsp;//标签图片\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create post_tag_pivot</code>&nbsp;创建 post_tag_pivot 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_014008_post_tag_pivot&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%post_tag_pivot}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//对应posts表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;//对应tags表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-post_id&#39;,&nbsp;&nbsp;&nbsp;//建立索引的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的键\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//同上\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-tag_id&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">数据表就建立完成了。</p><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">二、tags 表的增删改查</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">打开 Gii 工具。选择 Model Generator。依次建立 tags 和 post_tag_pivot 模型。Namespace 选择 common\\models。之后修改 common\\models 文件夹下 tags 文件内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;common\\models;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;yii\\behaviors\\TimestampBehavior;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\n/**\r\n&nbsp;*&nbsp;This&nbsp;is&nbsp;the&nbsp;model&nbsp;class&nbsp;for&nbsp;table&nbsp;&quot;tags&quot;.\r\n&nbsp;*\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$id\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$meta_description\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag_img\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$created_at\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$updated_at\r\n&nbsp;*/\r\nclass&nbsp;Tags&nbsp;extends&nbsp;\\yii\\db\\ActiveRecord\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;tableName()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#39;tags&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimestampBehavior::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;],&nbsp;&#39;required&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;,&nbsp;&#39;meta_description&#39;,&nbsp;&#39;tag_img&#39;],&nbsp;&#39;string&#39;,&nbsp;&#39;max&#39;&nbsp;=&gt;&nbsp;255],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;attributeLabels()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;ID&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;&#39;Tag&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;&#39;Meta&nbsp;Description&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;&#39;Tag&nbsp;Img&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;layout&#39;&nbsp;=&gt;&nbsp;&#39;Layout&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;&#39;Created&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;&#39;Updated&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;TagsQuery&nbsp;the&nbsp;active&nbsp;query&nbsp;used&nbsp;by&nbsp;this&nbsp;AR&nbsp;class.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getPosts()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Posts::className(),[&#39;id&#39;=&gt;&#39;post_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;tag_id&#39;=&gt;&#39;id&#39;])-&gt;where([&#39;status&#39;=&gt;1]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">添加&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">TimestampBehavior</code>&nbsp;行为就不多说了，第一篇有讲。 这里还添加了一个&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">getPosts()</code>方法，作用是通过中间表，从tags 表中查询 posts信息，详细了解看手册关于 ActiveRecord（活动记录）部分。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">选择CRUD Generator，生成 tags 表的增删改查。不需要生成 post_tag_pivot 表的增删改查。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">标签上传功能的实现。</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 backend\\models 目录下，新建 TagFrom 模型，作为 tag_img 文件上传的模型，内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/**\r\n&nbsp;*&nbsp;@Author:&nbsp;Admin\r\n&nbsp;*&nbsp;@Date:&nbsp;&nbsp;&nbsp;2016-08-18&nbsp;13:04:17\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;by:&nbsp;&nbsp;&nbsp;Admin\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;time:&nbsp;2016-08-23&nbsp;15:50:54\r\n&nbsp;*&nbsp;@version\r\n&nbsp;*/\r\nnamespace&nbsp;backend\\models;\r\n\r\nuse&nbsp;yii\\base\\Model;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\nclass&nbsp;TagForm&nbsp;extends&nbsp;Model\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;UploadedFile\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$tag;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$meta_description;\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$tag_img;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$layout;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag_img&#39;],&nbsp;&#39;file&#39;,&nbsp;&#39;skipOnEmpty&#39;&nbsp;=&gt;&nbsp;false,&nbsp;&#39;extensions&#39;&nbsp;=&gt;&nbsp;&#39;png,&nbsp;jpg&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;upload()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;validate())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randName=date(&quot;Y&quot;).date(&quot;m&quot;).date(&quot;d&quot;).date(&quot;H&quot;).date(&quot;i&quot;).date(&quot;s&quot;).rand(100,&nbsp;999).&#39;-&#39;.md5(microtime());&nbsp;&nbsp;&nbsp;//生成随机文件名\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadPath=&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$randName&nbsp;.&nbsp;&#39;.&#39;&nbsp;.&nbsp;$this-&gt;tag_img-&gt;extension;&nbsp;&nbsp;//设置保存路径，&nbsp;为&nbsp;backend\\web\\uploads\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;tag_img-&gt;saveAs($uploadPath);&nbsp;&nbsp;//保存文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Url::to(&#39;advanced/backend/web/&#39;.$uploadPath,true);&nbsp;//返回文件的&nbsp;url&nbsp;路径，使用&nbsp;Url&nbsp;帮助类。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改 backend\\controllers 目录下 TagController.php 文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;backend\\models\\TagSearch;\r\nuse&nbsp;backend\\models\\TagForm;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n/**\r\n&nbsp;*&nbsp;TagController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Tags&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;TagController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Tags&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;TagSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Tags();&nbsp;&nbsp;//新建&nbsp;Tags&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;$this-&gt;findModel($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=&nbsp;new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Tags&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;Tags&nbsp;the&nbsp;loaded&nbsp;model\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NotFoundHttpException&nbsp;if&nbsp;the&nbsp;model&nbsp;cannot&nbsp;be&nbsp;found\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;findModel($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(($model&nbsp;=&nbsp;Tags::findOne($id))&nbsp;!==&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$model;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;NotFoundHttpException(&#39;The&nbsp;requested&nbsp;page&nbsp;does&nbsp;not&nbsp;exist.&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;save($request,$model,$uploadImg)&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;自定义函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($request-&gt;isPost)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;$request-&gt;post(&#39;Tags&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag&nbsp;=&nbsp;$tag[&#39;tag&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;meta_description&nbsp;=&nbsp;$tag[&#39;meta_description&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($uploadImg-&gt;tag_img=&nbsp;UploadedFile::getInstance($uploadImg,&nbsp;&#39;tag_img&#39;)){&nbsp;&nbsp;&nbsp;//&nbsp;调用&nbsp;&nbsp;UploadedFile&nbsp;获得上传文件实例传递给&nbsp;&nbsp;&nbsp;$uploadImg-&gt;tag_img\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($uploadPath&nbsp;=&nbsp;$uploadImg-&gt;upload())&nbsp;&nbsp;&nbsp;//上传文件，返回文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag_img&nbsp;=&nbsp;$uploadPath;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;save())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改视图文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\_form.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\nuse&nbsp;yii\\widgets\\ActiveForm;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n/*&nbsp;@var&nbsp;$form&nbsp;yii\\widgets\\ActiveForm&nbsp;*/\r\n?&gt;\r\n\r\n&lt;div&nbsp;class=&quot;tags-form&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;$form&nbsp;=&nbsp;ActiveForm::begin([&#39;options&#39;&nbsp;=&gt;&nbsp;[&#39;enctype&#39;&nbsp;=&gt;&nbsp;&#39;multipart/form-data&#39;]]);&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;tag&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;meta_description&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($uploadImg,&nbsp;&#39;tag_img&#39;)-&gt;fileInput()&nbsp;?&gt;&nbsp;&nbsp;&nbsp;&nbsp;//文件输入框\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;layout&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;form-group&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;Html::submitButton($model-&gt;isNewRecord&nbsp;?&nbsp;&#39;Create&#39;&nbsp;:&nbsp;&#39;Update&#39;,&nbsp;[&#39;class&#39;&nbsp;=&gt;&nbsp;$model-&gt;isNewRecord&nbsp;?&nbsp;&#39;btn&nbsp;btn-success&#39;&nbsp;:&nbsp;&#39;btn&nbsp;btn-primary&#39;])&nbsp;?&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;ActiveForm::end();&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\create.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Create&nbsp;Tags&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-create&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\update.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Update&nbsp;Tags:&nbsp;&#39;&nbsp;.&nbsp;$model-&gt;id;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;$model-&gt;id,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;&#39;Update&#39;;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-update&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">前台建立 Tag 显示</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着在 Gii 选择 Controller Generator。Controller Class 填写 frontend\\controllers\\TagController 。 View Path 填写 @frontend/views/tag。生成控制器文件。<br style=\"box-sizing: border-box;\"/>接着打开 frontend\\controllers\\TagController.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;frontend\\controllers;\r\n\r\nuse&nbsp;common\\models\\Tags;\r\nclass&nbsp;TagController&nbsp;extends&nbsp;\\yii\\web\\Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&#39;tags&#39;=&gt;$tags]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在修改 frontend\\controllers\\view\\tag\\index.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;标签&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;标签&lt;/h1&gt;\r\n\r\n\r\n&lt;div&nbsp;class=&quot;row&quot;&gt;\r\n&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n?&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;col-md-3&quot;&gt;\r\n&nbsp;&nbsp;	&lt;div&nbsp;class=&quot;media&quot;&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-left&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;#&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=&quot;media-object&quot;&nbsp;width=&quot;54px&quot;&nbsp;height=&quot;54px&quot;&nbsp;src=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag_img&quot;;&nbsp;?&gt;&quot;&nbsp;alt=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-body&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h4&nbsp;class=&quot;media-heading&quot;&gt;&lt;a&nbsp;href=&quot;&lt;?php&nbsp;echo&nbsp;Url::toRoute([&#39;post/index&#39;,&#39;id&#39;=&gt;$tags-&gt;id]);&nbsp;?&gt;&quot;&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&lt;/a&gt;&lt;/h4&gt;&nbsp;&nbsp;//设置&nbsp;Url&nbsp;，点击标签名时，显示该标签所有的文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;meta_description&quot;;&nbsp;?&gt;&lt;/p&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;?php&nbsp;}&nbsp;?&gt;\r\n&lt;/div&gt;</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着修改 frontend\\controllers\\PostController.php 文件的 actionIndex 方法如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">	public&nbsp;function&nbsp;actionIndex($id=&#39;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty($id))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=Tags::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;$tags-&gt;getPosts()-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);&nbsp;&nbsp;&nbsp;//根据标签&nbsp;Id&nbsp;查找所有&nbsp;Post\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;Posts::find()-&gt;where([&#39;status&#39;&nbsp;=&gt;&nbsp;1])-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);\r\n;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$countuPosts&nbsp;=&nbsp;clone&nbsp;$posts&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pages&nbsp;=&nbsp;new&nbsp;Pagination([&#39;totalCount&#39;&nbsp;=&gt;&nbsp;$countuPosts-&gt;count(),&#39;pageSize&#39;=&gt;5]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$models&nbsp;=&nbsp;$posts-&gt;offset($pages-&gt;offset)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;limit($pages-&gt;limit)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;all();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;models&#39;&nbsp;=&gt;&nbsp;$models,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;pages&#39;&nbsp;=&gt;&nbsp;$pages,\r\n&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在文章详情页显示标签</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n$this-&gt;title&nbsp;=&nbsp;$post-&gt;title;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Posts&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;&lt;?php&nbsp;echo&nbsp;&nbsp;$post-&gt;title;&nbsp;?&gt;&lt;/h1&gt;\r\n&lt;p&nbsp;class=&quot;text-muted&quot;&gt;作者：&lt;?php&nbsp;echo&nbsp;$post-&gt;author;&nbsp;?&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;标签:&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n	echo&nbsp;&quot;&lt;kbd&gt;&quot;.$tags[&#39;tag&#39;].&quot;&lt;/kbd&gt;&amp;nbsp;&amp;nbsp;&quot;;\r\n}&nbsp;?&gt;&lt;/p&gt;\r\n&lt;p&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;echo&nbsp;yii\\helpers\\Markdown::process($post-&gt;content,&nbsp;&#39;gfm&#39;);&nbsp;?&gt;\r\n&lt;/p&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">新建 post 表时添加 tag</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 common\\models\\Posts.php 下添加 getTags 方法 中间表查询。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&nbsp;public&nbsp;function&nbsp;getTags()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Tags::className(),[&#39;id&#39;=&gt;&#39;tag_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;post_id&#39;=&gt;&#39;id&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">修改 backend\\controllers\\PostContrlloer.php 内容如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Posts;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;common\\models\\PostTagPivot;\r\nuse&nbsp;backend\\models\\PostsSearch;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\n\r\n/**\r\n&nbsp;*&nbsp;PostController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Posts&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;PostController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionSeeder(){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$faker&nbsp;=&nbsp;\\Faker\\Factory::create(&#39;zh_CN&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a=0;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i=0;&nbsp;$i&nbsp;&lt;20&nbsp;;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;title&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;20);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;author&nbsp;=&nbsp;$faker-&gt;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;content&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;3000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($posts-&gt;insert())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a+=1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;添加&quot;.$a.&quot;条数据&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Posts&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;PostsSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()&nbsp;&nbsp;//创建&nbsp;post&nbsp;时，查找所有标签，提供选择\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();&nbsp;&nbsp;//查找所有标签\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=&quot;&quot;;&nbsp;&nbsp;//已选择的标签，由于新建标签所以&nbsp;&nbsp;$checkTags&nbsp;为空。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($model-&gt;attributes[&#39;id&#39;],$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//新建&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,&nbsp;&nbsp;//传递所有标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,&nbsp;//传递已选择标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)&nbsp;&nbsp;&nbsp;//修改&nbsp;post&nbsp;时，查找所有标签，并查找改&nbsp;post&nbsp;的&nbsp;tag&nbsp;传到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;Posts::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTag&nbsp;=&nbsp;&nbsp;$model-&gt;tags;&nbsp;&nbsp;//根据&nbsp;post&nbsp;的&nbsp;id&nbsp;查找已选择的&nbsp;tag\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=array();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;$checkTag&nbsp;as&nbsp;$checkTag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags[]=$checkTag-&gt;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//把查找到的&nbsp;$checkTag&nbsp;提取出已选择&nbsp;tag&nbsp;的&nbsp;id。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($id,$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//修改&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag&nbsp;保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;saveTag($id,$checkTag)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostTagPivot::deleteAll(&quot;post_id&nbsp;=&nbsp;$id&quot;);&nbsp;&nbsp;&nbsp;//首先根据&nbsp;post&nbsp;的&nbsp;id&nbsp;删除&nbsp;Post_Tag_Pivot&nbsp;表建立的关系\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($checkTag)&nbsp;{&nbsp;&nbsp;&nbsp;//根据前台传回来的选择写入数据库。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($checkTag&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot&nbsp;=&nbsp;new&nbsp;PostTagPivot();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;post_id&nbsp;=&nbsp;$id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;tag_id&nbsp;=&nbsp;$value;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;insert();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Posts&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nb',1,1478150960,1,1478150960,0,'/image/20161103/1478150910122903.jpg'),(15,2,'测试测试','首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接yii2博客项目笔记（一）。初步分析由于 post 和 tag 表为多对多关系','<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接&nbsp;<a href=\"http://www.yii-china.com/post/detail/408.html\" target=\"_blank\" style=\"box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); text-decoration: none; outline: none; cursor: pointer;\">yii2博客项目笔记（一）</a>。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">初步分析</h3><ul class=\" list-paddingleft-2\" style=\"box-sizing: border-box; margin-bottom: 10px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\"><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">由于 post 和 tag 表为多对多关系，所以需要建立中间表 post_tag_pivot 。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">tag 支持上传标签图片。涉及文件上传。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">新建和修改 post 时支持添加和修改 tag ，采用多项复选框。</p></li></ul><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">教程开始</h3><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">一、数据表的建立</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create tags</code>&nbsp;创建 Tags 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_013927_tags&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%tags}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;$this-&gt;string()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//标签名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;//标签描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;&nbsp;//标签图片\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create post_tag_pivot</code>&nbsp;创建 post_tag_pivot 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_014008_post_tag_pivot&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%post_tag_pivot}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//对应posts表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;//对应tags表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-post_id&#39;,&nbsp;&nbsp;&nbsp;//建立索引的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的键\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//同上\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-tag_id&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">数据表就建立完成了。</p><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">二、tags 表的增删改查</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">打开 Gii 工具。选择 Model Generator。依次建立 tags 和 post_tag_pivot 模型。Namespace 选择 common\\models。之后修改 common\\models 文件夹下 tags 文件内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;common\\models;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;yii\\behaviors\\TimestampBehavior;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\n/**\r\n&nbsp;*&nbsp;This&nbsp;is&nbsp;the&nbsp;model&nbsp;class&nbsp;for&nbsp;table&nbsp;&quot;tags&quot;.\r\n&nbsp;*\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$id\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$meta_description\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag_img\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$created_at\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$updated_at\r\n&nbsp;*/\r\nclass&nbsp;Tags&nbsp;extends&nbsp;\\yii\\db\\ActiveRecord\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;tableName()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#39;tags&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimestampBehavior::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;],&nbsp;&#39;required&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;,&nbsp;&#39;meta_description&#39;,&nbsp;&#39;tag_img&#39;],&nbsp;&#39;string&#39;,&nbsp;&#39;max&#39;&nbsp;=&gt;&nbsp;255],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;attributeLabels()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;ID&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;&#39;Tag&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;&#39;Meta&nbsp;Description&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;&#39;Tag&nbsp;Img&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;layout&#39;&nbsp;=&gt;&nbsp;&#39;Layout&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;&#39;Created&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;&#39;Updated&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;TagsQuery&nbsp;the&nbsp;active&nbsp;query&nbsp;used&nbsp;by&nbsp;this&nbsp;AR&nbsp;class.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getPosts()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Posts::className(),[&#39;id&#39;=&gt;&#39;post_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;tag_id&#39;=&gt;&#39;id&#39;])-&gt;where([&#39;status&#39;=&gt;1]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">添加&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">TimestampBehavior</code>&nbsp;行为就不多说了，第一篇有讲。 这里还添加了一个&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">getPosts()</code>方法，作用是通过中间表，从tags 表中查询 posts信息，详细了解看手册关于 ActiveRecord（活动记录）部分。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">选择CRUD Generator，生成 tags 表的增删改查。不需要生成 post_tag_pivot 表的增删改查。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">标签上传功能的实现。</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 backend\\models 目录下，新建 TagFrom 模型，作为 tag_img 文件上传的模型，内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/**\r\n&nbsp;*&nbsp;@Author:&nbsp;Admin\r\n&nbsp;*&nbsp;@Date:&nbsp;&nbsp;&nbsp;2016-08-18&nbsp;13:04:17\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;by:&nbsp;&nbsp;&nbsp;Admin\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;time:&nbsp;2016-08-23&nbsp;15:50:54\r\n&nbsp;*&nbsp;@version\r\n&nbsp;*/\r\nnamespace&nbsp;backend\\models;\r\n\r\nuse&nbsp;yii\\base\\Model;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\nclass&nbsp;TagForm&nbsp;extends&nbsp;Model\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;UploadedFile\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$tag;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$meta_description;\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$tag_img;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$layout;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag_img&#39;],&nbsp;&#39;file&#39;,&nbsp;&#39;skipOnEmpty&#39;&nbsp;=&gt;&nbsp;false,&nbsp;&#39;extensions&#39;&nbsp;=&gt;&nbsp;&#39;png,&nbsp;jpg&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;upload()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;validate())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randName=date(&quot;Y&quot;).date(&quot;m&quot;).date(&quot;d&quot;).date(&quot;H&quot;).date(&quot;i&quot;).date(&quot;s&quot;).rand(100,&nbsp;999).&#39;-&#39;.md5(microtime());&nbsp;&nbsp;&nbsp;//生成随机文件名\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadPath=&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$randName&nbsp;.&nbsp;&#39;.&#39;&nbsp;.&nbsp;$this-&gt;tag_img-&gt;extension;&nbsp;&nbsp;//设置保存路径，&nbsp;为&nbsp;backend\\web\\uploads\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;tag_img-&gt;saveAs($uploadPath);&nbsp;&nbsp;//保存文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Url::to(&#39;advanced/backend/web/&#39;.$uploadPath,true);&nbsp;//返回文件的&nbsp;url&nbsp;路径，使用&nbsp;Url&nbsp;帮助类。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改 backend\\controllers 目录下 TagController.php 文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;backend\\models\\TagSearch;\r\nuse&nbsp;backend\\models\\TagForm;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n/**\r\n&nbsp;*&nbsp;TagController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Tags&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;TagController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Tags&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;TagSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Tags();&nbsp;&nbsp;//新建&nbsp;Tags&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;$this-&gt;findModel($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=&nbsp;new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Tags&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;Tags&nbsp;the&nbsp;loaded&nbsp;model\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NotFoundHttpException&nbsp;if&nbsp;the&nbsp;model&nbsp;cannot&nbsp;be&nbsp;found\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;findModel($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(($model&nbsp;=&nbsp;Tags::findOne($id))&nbsp;!==&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$model;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;NotFoundHttpException(&#39;The&nbsp;requested&nbsp;page&nbsp;does&nbsp;not&nbsp;exist.&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;save($request,$model,$uploadImg)&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;自定义函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($request-&gt;isPost)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;$request-&gt;post(&#39;Tags&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag&nbsp;=&nbsp;$tag[&#39;tag&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;meta_description&nbsp;=&nbsp;$tag[&#39;meta_description&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($uploadImg-&gt;tag_img=&nbsp;UploadedFile::getInstance($uploadImg,&nbsp;&#39;tag_img&#39;)){&nbsp;&nbsp;&nbsp;//&nbsp;调用&nbsp;&nbsp;UploadedFile&nbsp;获得上传文件实例传递给&nbsp;&nbsp;&nbsp;$uploadImg-&gt;tag_img\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($uploadPath&nbsp;=&nbsp;$uploadImg-&gt;upload())&nbsp;&nbsp;&nbsp;//上传文件，返回文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag_img&nbsp;=&nbsp;$uploadPath;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;save())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改视图文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\_form.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\nuse&nbsp;yii\\widgets\\ActiveForm;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n/*&nbsp;@var&nbsp;$form&nbsp;yii\\widgets\\ActiveForm&nbsp;*/\r\n?&gt;\r\n\r\n&lt;div&nbsp;class=&quot;tags-form&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;$form&nbsp;=&nbsp;ActiveForm::begin([&#39;options&#39;&nbsp;=&gt;&nbsp;[&#39;enctype&#39;&nbsp;=&gt;&nbsp;&#39;multipart/form-data&#39;]]);&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;tag&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;meta_description&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($uploadImg,&nbsp;&#39;tag_img&#39;)-&gt;fileInput()&nbsp;?&gt;&nbsp;&nbsp;&nbsp;&nbsp;//文件输入框\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;layout&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;form-group&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;Html::submitButton($model-&gt;isNewRecord&nbsp;?&nbsp;&#39;Create&#39;&nbsp;:&nbsp;&#39;Update&#39;,&nbsp;[&#39;class&#39;&nbsp;=&gt;&nbsp;$model-&gt;isNewRecord&nbsp;?&nbsp;&#39;btn&nbsp;btn-success&#39;&nbsp;:&nbsp;&#39;btn&nbsp;btn-primary&#39;])&nbsp;?&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;ActiveForm::end();&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\create.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Create&nbsp;Tags&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-create&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\update.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Update&nbsp;Tags:&nbsp;&#39;&nbsp;.&nbsp;$model-&gt;id;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;$model-&gt;id,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;&#39;Update&#39;;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-update&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">前台建立 Tag 显示</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着在 Gii 选择 Controller Generator。Controller Class 填写 frontend\\controllers\\TagController 。 View Path 填写 @frontend/views/tag。生成控制器文件。<br style=\"box-sizing: border-box;\"/>接着打开 frontend\\controllers\\TagController.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;frontend\\controllers;\r\n\r\nuse&nbsp;common\\models\\Tags;\r\nclass&nbsp;TagController&nbsp;extends&nbsp;\\yii\\web\\Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&#39;tags&#39;=&gt;$tags]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在修改 frontend\\controllers\\view\\tag\\index.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;标签&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;标签&lt;/h1&gt;\r\n\r\n\r\n&lt;div&nbsp;class=&quot;row&quot;&gt;\r\n&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n?&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;col-md-3&quot;&gt;\r\n&nbsp;&nbsp;	&lt;div&nbsp;class=&quot;media&quot;&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-left&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;#&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=&quot;media-object&quot;&nbsp;width=&quot;54px&quot;&nbsp;height=&quot;54px&quot;&nbsp;src=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag_img&quot;;&nbsp;?&gt;&quot;&nbsp;alt=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-body&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h4&nbsp;class=&quot;media-heading&quot;&gt;&lt;a&nbsp;href=&quot;&lt;?php&nbsp;echo&nbsp;Url::toRoute([&#39;post/index&#39;,&#39;id&#39;=&gt;$tags-&gt;id]);&nbsp;?&gt;&quot;&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&lt;/a&gt;&lt;/h4&gt;&nbsp;&nbsp;//设置&nbsp;Url&nbsp;，点击标签名时，显示该标签所有的文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;meta_description&quot;;&nbsp;?&gt;&lt;/p&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;?php&nbsp;}&nbsp;?&gt;\r\n&lt;/div&gt;</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着修改 frontend\\controllers\\PostController.php 文件的 actionIndex 方法如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">	public&nbsp;function&nbsp;actionIndex($id=&#39;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty($id))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=Tags::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;$tags-&gt;getPosts()-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);&nbsp;&nbsp;&nbsp;//根据标签&nbsp;Id&nbsp;查找所有&nbsp;Post\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;Posts::find()-&gt;where([&#39;status&#39;&nbsp;=&gt;&nbsp;1])-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);\r\n;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$countuPosts&nbsp;=&nbsp;clone&nbsp;$posts&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pages&nbsp;=&nbsp;new&nbsp;Pagination([&#39;totalCount&#39;&nbsp;=&gt;&nbsp;$countuPosts-&gt;count(),&#39;pageSize&#39;=&gt;5]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$models&nbsp;=&nbsp;$posts-&gt;offset($pages-&gt;offset)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;limit($pages-&gt;limit)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;all();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;models&#39;&nbsp;=&gt;&nbsp;$models,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;pages&#39;&nbsp;=&gt;&nbsp;$pages,\r\n&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在文章详情页显示标签</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n$this-&gt;title&nbsp;=&nbsp;$post-&gt;title;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Posts&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;&lt;?php&nbsp;echo&nbsp;&nbsp;$post-&gt;title;&nbsp;?&gt;&lt;/h1&gt;\r\n&lt;p&nbsp;class=&quot;text-muted&quot;&gt;作者：&lt;?php&nbsp;echo&nbsp;$post-&gt;author;&nbsp;?&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;标签:&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n	echo&nbsp;&quot;&lt;kbd&gt;&quot;.$tags[&#39;tag&#39;].&quot;&lt;/kbd&gt;&amp;nbsp;&amp;nbsp;&quot;;\r\n}&nbsp;?&gt;&lt;/p&gt;\r\n&lt;p&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;echo&nbsp;yii\\helpers\\Markdown::process($post-&gt;content,&nbsp;&#39;gfm&#39;);&nbsp;?&gt;\r\n&lt;/p&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">新建 post 表时添加 tag</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 common\\models\\Posts.php 下添加 getTags 方法 中间表查询。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&nbsp;public&nbsp;function&nbsp;getTags()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Tags::className(),[&#39;id&#39;=&gt;&#39;tag_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;post_id&#39;=&gt;&#39;id&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">修改 backend\\controllers\\PostContrlloer.php 内容如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Posts;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;common\\models\\PostTagPivot;\r\nuse&nbsp;backend\\models\\PostsSearch;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\n\r\n/**\r\n&nbsp;*&nbsp;PostController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Posts&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;PostController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionSeeder(){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$faker&nbsp;=&nbsp;\\Faker\\Factory::create(&#39;zh_CN&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a=0;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i=0;&nbsp;$i&nbsp;&lt;20&nbsp;;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;title&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;20);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;author&nbsp;=&nbsp;$faker-&gt;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;content&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;3000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($posts-&gt;insert())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a+=1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;添加&quot;.$a.&quot;条数据&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Posts&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;PostsSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()&nbsp;&nbsp;//创建&nbsp;post&nbsp;时，查找所有标签，提供选择\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();&nbsp;&nbsp;//查找所有标签\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=&quot;&quot;;&nbsp;&nbsp;//已选择的标签，由于新建标签所以&nbsp;&nbsp;$checkTags&nbsp;为空。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($model-&gt;attributes[&#39;id&#39;],$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//新建&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,&nbsp;&nbsp;//传递所有标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,&nbsp;//传递已选择标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)&nbsp;&nbsp;&nbsp;//修改&nbsp;post&nbsp;时，查找所有标签，并查找改&nbsp;post&nbsp;的&nbsp;tag&nbsp;传到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;Posts::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTag&nbsp;=&nbsp;&nbsp;$model-&gt;tags;&nbsp;&nbsp;//根据&nbsp;post&nbsp;的&nbsp;id&nbsp;查找已选择的&nbsp;tag\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=array();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;$checkTag&nbsp;as&nbsp;$checkTag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags[]=$checkTag-&gt;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//把查找到的&nbsp;$checkTag&nbsp;提取出已选择&nbsp;tag&nbsp;的&nbsp;id。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($id,$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//修改&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag&nbsp;保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;saveTag($id,$checkTag)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostTagPivot::deleteAll(&quot;post_id&nbsp;=&nbsp;$id&quot;);&nbsp;&nbsp;&nbsp;//首先根据&nbsp;post&nbsp;的&nbsp;id&nbsp;删除&nbsp;Post_Tag_Pivot&nbsp;表建立的关系\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($checkTag)&nbsp;{&nbsp;&nbsp;&nbsp;//根据前台传回来的选择写入数据库。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($checkTag&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot&nbsp;=&nbsp;new&nbsp;PostTagPivot();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;post_id&nbsp;=&nbsp;$id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;tag_id&nbsp;=&nbsp;$value;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;insert();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Posts&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nb',1,1478151091,1,1478151091,0,'/image/20161103/1478151076944762.jpg'),(16,2,'有些测试','首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接yii2博客项目笔记（一）。初步分析由于 post 和 tag 表为多对多关系','<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接&nbsp;<a href=\"http://www.yii-china.com/post/detail/408.html\" target=\"_blank\" style=\"box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); text-decoration: none; outline: none; cursor: pointer;\">yii2博客项目笔记（一）</a>。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">初步分析</h3><ul class=\" list-paddingleft-2\" style=\"box-sizing: border-box; margin-bottom: 10px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\"><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">由于 post 和 tag 表为多对多关系，所以需要建立中间表 post_tag_pivot 。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">tag 支持上传标签图片。涉及文件上传。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">新建和修改 post 时支持添加和修改 tag ，采用多项复选框。</p></li></ul><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">教程开始</h3><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">一、数据表的建立</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create tags</code>&nbsp;创建 Tags 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_013927_tags&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%tags}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;$this-&gt;string()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//标签名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;//标签描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;&nbsp;//标签图片\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create post_tag_pivot</code>&nbsp;创建 post_tag_pivot 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_014008_post_tag_pivot&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%post_tag_pivot}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//对应posts表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;//对应tags表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-post_id&#39;,&nbsp;&nbsp;&nbsp;//建立索引的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的键\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//同上\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-tag_id&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">数据表就建立完成了。</p><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">二、tags 表的增删改查</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">打开 Gii 工具。选择 Model Generator。依次建立 tags 和 post_tag_pivot 模型。Namespace 选择 common\\models。之后修改 common\\models 文件夹下 tags 文件内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;common\\models;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;yii\\behaviors\\TimestampBehavior;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\n/**\r\n&nbsp;*&nbsp;This&nbsp;is&nbsp;the&nbsp;model&nbsp;class&nbsp;for&nbsp;table&nbsp;&quot;tags&quot;.\r\n&nbsp;*\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$id\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$meta_description\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag_img\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$created_at\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$updated_at\r\n&nbsp;*/\r\nclass&nbsp;Tags&nbsp;extends&nbsp;\\yii\\db\\ActiveRecord\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;tableName()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#39;tags&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimestampBehavior::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;],&nbsp;&#39;required&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;,&nbsp;&#39;meta_description&#39;,&nbsp;&#39;tag_img&#39;],&nbsp;&#39;string&#39;,&nbsp;&#39;max&#39;&nbsp;=&gt;&nbsp;255],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;attributeLabels()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;ID&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;&#39;Tag&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;&#39;Meta&nbsp;Description&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;&#39;Tag&nbsp;Img&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;layout&#39;&nbsp;=&gt;&nbsp;&#39;Layout&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;&#39;Created&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;&#39;Updated&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;TagsQuery&nbsp;the&nbsp;active&nbsp;query&nbsp;used&nbsp;by&nbsp;this&nbsp;AR&nbsp;class.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getPosts()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Posts::className(),[&#39;id&#39;=&gt;&#39;post_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;tag_id&#39;=&gt;&#39;id&#39;])-&gt;where([&#39;status&#39;=&gt;1]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">添加&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">TimestampBehavior</code>&nbsp;行为就不多说了，第一篇有讲。 这里还添加了一个&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">getPosts()</code>方法，作用是通过中间表，从tags 表中查询 posts信息，详细了解看手册关于 ActiveRecord（活动记录）部分。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">选择CRUD Generator，生成 tags 表的增删改查。不需要生成 post_tag_pivot 表的增删改查。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">标签上传功能的实现。</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 backend\\models 目录下，新建 TagFrom 模型，作为 tag_img 文件上传的模型，内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/**\r\n&nbsp;*&nbsp;@Author:&nbsp;Admin\r\n&nbsp;*&nbsp;@Date:&nbsp;&nbsp;&nbsp;2016-08-18&nbsp;13:04:17\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;by:&nbsp;&nbsp;&nbsp;Admin\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;time:&nbsp;2016-08-23&nbsp;15:50:54\r\n&nbsp;*&nbsp;@version\r\n&nbsp;*/\r\nnamespace&nbsp;backend\\models;\r\n\r\nuse&nbsp;yii\\base\\Model;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\nclass&nbsp;TagForm&nbsp;extends&nbsp;Model\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;UploadedFile\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$tag;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$meta_description;\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$tag_img;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$layout;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag_img&#39;],&nbsp;&#39;file&#39;,&nbsp;&#39;skipOnEmpty&#39;&nbsp;=&gt;&nbsp;false,&nbsp;&#39;extensions&#39;&nbsp;=&gt;&nbsp;&#39;png,&nbsp;jpg&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;upload()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;validate())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randName=date(&quot;Y&quot;).date(&quot;m&quot;).date(&quot;d&quot;).date(&quot;H&quot;).date(&quot;i&quot;).date(&quot;s&quot;).rand(100,&nbsp;999).&#39;-&#39;.md5(microtime());&nbsp;&nbsp;&nbsp;//生成随机文件名\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadPath=&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$randName&nbsp;.&nbsp;&#39;.&#39;&nbsp;.&nbsp;$this-&gt;tag_img-&gt;extension;&nbsp;&nbsp;//设置保存路径，&nbsp;为&nbsp;backend\\web\\uploads\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;tag_img-&gt;saveAs($uploadPath);&nbsp;&nbsp;//保存文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Url::to(&#39;advanced/backend/web/&#39;.$uploadPath,true);&nbsp;//返回文件的&nbsp;url&nbsp;路径，使用&nbsp;Url&nbsp;帮助类。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改 backend\\controllers 目录下 TagController.php 文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;backend\\models\\TagSearch;\r\nuse&nbsp;backend\\models\\TagForm;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n/**\r\n&nbsp;*&nbsp;TagController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Tags&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;TagController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Tags&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;TagSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Tags();&nbsp;&nbsp;//新建&nbsp;Tags&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;$this-&gt;findModel($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=&nbsp;new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Tags&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;Tags&nbsp;the&nbsp;loaded&nbsp;model\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NotFoundHttpException&nbsp;if&nbsp;the&nbsp;model&nbsp;cannot&nbsp;be&nbsp;found\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;findModel($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(($model&nbsp;=&nbsp;Tags::findOne($id))&nbsp;!==&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$model;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;NotFoundHttpException(&#39;The&nbsp;requested&nbsp;page&nbsp;does&nbsp;not&nbsp;exist.&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;save($request,$model,$uploadImg)&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;自定义函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($request-&gt;isPost)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;$request-&gt;post(&#39;Tags&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag&nbsp;=&nbsp;$tag[&#39;tag&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;meta_description&nbsp;=&nbsp;$tag[&#39;meta_description&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($uploadImg-&gt;tag_img=&nbsp;UploadedFile::getInstance($uploadImg,&nbsp;&#39;tag_img&#39;)){&nbsp;&nbsp;&nbsp;//&nbsp;调用&nbsp;&nbsp;UploadedFile&nbsp;获得上传文件实例传递给&nbsp;&nbsp;&nbsp;$uploadImg-&gt;tag_img\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($uploadPath&nbsp;=&nbsp;$uploadImg-&gt;upload())&nbsp;&nbsp;&nbsp;//上传文件，返回文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag_img&nbsp;=&nbsp;$uploadPath;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;save())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改视图文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\_form.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\nuse&nbsp;yii\\widgets\\ActiveForm;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n/*&nbsp;@var&nbsp;$form&nbsp;yii\\widgets\\ActiveForm&nbsp;*/\r\n?&gt;\r\n\r\n&lt;div&nbsp;class=&quot;tags-form&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;$form&nbsp;=&nbsp;ActiveForm::begin([&#39;options&#39;&nbsp;=&gt;&nbsp;[&#39;enctype&#39;&nbsp;=&gt;&nbsp;&#39;multipart/form-data&#39;]]);&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;tag&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;meta_description&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($uploadImg,&nbsp;&#39;tag_img&#39;)-&gt;fileInput()&nbsp;?&gt;&nbsp;&nbsp;&nbsp;&nbsp;//文件输入框\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;layout&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;form-group&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;Html::submitButton($model-&gt;isNewRecord&nbsp;?&nbsp;&#39;Create&#39;&nbsp;:&nbsp;&#39;Update&#39;,&nbsp;[&#39;class&#39;&nbsp;=&gt;&nbsp;$model-&gt;isNewRecord&nbsp;?&nbsp;&#39;btn&nbsp;btn-success&#39;&nbsp;:&nbsp;&#39;btn&nbsp;btn-primary&#39;])&nbsp;?&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;ActiveForm::end();&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\create.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Create&nbsp;Tags&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-create&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\update.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Update&nbsp;Tags:&nbsp;&#39;&nbsp;.&nbsp;$model-&gt;id;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;$model-&gt;id,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;&#39;Update&#39;;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-update&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">前台建立 Tag 显示</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着在 Gii 选择 Controller Generator。Controller Class 填写 frontend\\controllers\\TagController 。 View Path 填写 @frontend/views/tag。生成控制器文件。<br style=\"box-sizing: border-box;\"/>接着打开 frontend\\controllers\\TagController.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;frontend\\controllers;\r\n\r\nuse&nbsp;common\\models\\Tags;\r\nclass&nbsp;TagController&nbsp;extends&nbsp;\\yii\\web\\Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&#39;tags&#39;=&gt;$tags]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在修改 frontend\\controllers\\view\\tag\\index.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;标签&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;标签&lt;/h1&gt;\r\n\r\n\r\n&lt;div&nbsp;class=&quot;row&quot;&gt;\r\n&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n?&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;col-md-3&quot;&gt;\r\n&nbsp;&nbsp;	&lt;div&nbsp;class=&quot;media&quot;&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-left&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;#&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=&quot;media-object&quot;&nbsp;width=&quot;54px&quot;&nbsp;height=&quot;54px&quot;&nbsp;src=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag_img&quot;;&nbsp;?&gt;&quot;&nbsp;alt=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-body&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h4&nbsp;class=&quot;media-heading&quot;&gt;&lt;a&nbsp;href=&quot;&lt;?php&nbsp;echo&nbsp;Url::toRoute([&#39;post/index&#39;,&#39;id&#39;=&gt;$tags-&gt;id]);&nbsp;?&gt;&quot;&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&lt;/a&gt;&lt;/h4&gt;&nbsp;&nbsp;//设置&nbsp;Url&nbsp;，点击标签名时，显示该标签所有的文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;meta_description&quot;;&nbsp;?&gt;&lt;/p&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;?php&nbsp;}&nbsp;?&gt;\r\n&lt;/div&gt;</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着修改 frontend\\controllers\\PostController.php 文件的 actionIndex 方法如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">	public&nbsp;function&nbsp;actionIndex($id=&#39;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty($id))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=Tags::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;$tags-&gt;getPosts()-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);&nbsp;&nbsp;&nbsp;//根据标签&nbsp;Id&nbsp;查找所有&nbsp;Post\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;Posts::find()-&gt;where([&#39;status&#39;&nbsp;=&gt;&nbsp;1])-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);\r\n;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$countuPosts&nbsp;=&nbsp;clone&nbsp;$posts&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pages&nbsp;=&nbsp;new&nbsp;Pagination([&#39;totalCount&#39;&nbsp;=&gt;&nbsp;$countuPosts-&gt;count(),&#39;pageSize&#39;=&gt;5]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$models&nbsp;=&nbsp;$posts-&gt;offset($pages-&gt;offset)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;limit($pages-&gt;limit)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;all();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;models&#39;&nbsp;=&gt;&nbsp;$models,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;pages&#39;&nbsp;=&gt;&nbsp;$pages,\r\n&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在文章详情页显示标签</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n$this-&gt;title&nbsp;=&nbsp;$post-&gt;title;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Posts&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;&lt;?php&nbsp;echo&nbsp;&nbsp;$post-&gt;title;&nbsp;?&gt;&lt;/h1&gt;\r\n&lt;p&nbsp;class=&quot;text-muted&quot;&gt;作者：&lt;?php&nbsp;echo&nbsp;$post-&gt;author;&nbsp;?&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;标签:&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n	echo&nbsp;&quot;&lt;kbd&gt;&quot;.$tags[&#39;tag&#39;].&quot;&lt;/kbd&gt;&amp;nbsp;&amp;nbsp;&quot;;\r\n}&nbsp;?&gt;&lt;/p&gt;\r\n&lt;p&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;echo&nbsp;yii\\helpers\\Markdown::process($post-&gt;content,&nbsp;&#39;gfm&#39;);&nbsp;?&gt;\r\n&lt;/p&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">新建 post 表时添加 tag</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 common\\models\\Posts.php 下添加 getTags 方法 中间表查询。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&nbsp;public&nbsp;function&nbsp;getTags()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Tags::className(),[&#39;id&#39;=&gt;&#39;tag_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;post_id&#39;=&gt;&#39;id&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">修改 backend\\controllers\\PostContrlloer.php 内容如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Posts;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;common\\models\\PostTagPivot;\r\nuse&nbsp;backend\\models\\PostsSearch;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\n\r\n/**\r\n&nbsp;*&nbsp;PostController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Posts&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;PostController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionSeeder(){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$faker&nbsp;=&nbsp;\\Faker\\Factory::create(&#39;zh_CN&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a=0;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i=0;&nbsp;$i&nbsp;&lt;20&nbsp;;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;title&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;20);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;author&nbsp;=&nbsp;$faker-&gt;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;content&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;3000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($posts-&gt;insert())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a+=1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;添加&quot;.$a.&quot;条数据&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Posts&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;PostsSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()&nbsp;&nbsp;//创建&nbsp;post&nbsp;时，查找所有标签，提供选择\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();&nbsp;&nbsp;//查找所有标签\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=&quot;&quot;;&nbsp;&nbsp;//已选择的标签，由于新建标签所以&nbsp;&nbsp;$checkTags&nbsp;为空。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($model-&gt;attributes[&#39;id&#39;],$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//新建&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,&nbsp;&nbsp;//传递所有标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,&nbsp;//传递已选择标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)&nbsp;&nbsp;&nbsp;//修改&nbsp;post&nbsp;时，查找所有标签，并查找改&nbsp;post&nbsp;的&nbsp;tag&nbsp;传到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;Posts::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTag&nbsp;=&nbsp;&nbsp;$model-&gt;tags;&nbsp;&nbsp;//根据&nbsp;post&nbsp;的&nbsp;id&nbsp;查找已选择的&nbsp;tag\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=array();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;$checkTag&nbsp;as&nbsp;$checkTag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags[]=$checkTag-&gt;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//把查找到的&nbsp;$checkTag&nbsp;提取出已选择&nbsp;tag&nbsp;的&nbsp;id。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($id,$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//修改&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag&nbsp;保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;saveTag($id,$checkTag)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostTagPivot::deleteAll(&quot;post_id&nbsp;=&nbsp;$id&quot;);&nbsp;&nbsp;&nbsp;//首先根据&nbsp;post&nbsp;的&nbsp;id&nbsp;删除&nbsp;Post_Tag_Pivot&nbsp;表建立的关系\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($checkTag)&nbsp;{&nbsp;&nbsp;&nbsp;//根据前台传回来的选择写入数据库。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($checkTag&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot&nbsp;=&nbsp;new&nbsp;PostTagPivot();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;post_id&nbsp;=&nbsp;$id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;tag_id&nbsp;=&nbsp;$value;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;insert();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Posts&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nb',1,1478151219,1,1478151219,0,'/image/20161103/1478151125295757.jpg'),(17,2,'你好你好','首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接yii2博客项目笔记（一）。初步分析由于 post 和 tag 表为多对多关系','<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">首先声明一下，对于第二篇与第一篇中类似的部分不会太过于详述。觉得不够详细的部分可以参考第一篇。附上链接&nbsp;<a href=\"http://www.yii-china.com/post/detail/408.html\" target=\"_blank\" style=\"box-sizing: border-box; background-color: transparent; color: rgb(51, 122, 183); text-decoration: none; outline: none; cursor: pointer;\">yii2博客项目笔记（一）</a>。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">初步分析</h3><ul class=\" list-paddingleft-2\" style=\"box-sizing: border-box; margin-bottom: 10px; padding: 0px 0px 0px 20px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\"><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">由于 post 和 tag 表为多对多关系，所以需要建立中间表 post_tag_pivot 。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">tag 支持上传标签图片。涉及文件上传。</p></li><li><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px;\">新建和修改 post 时支持添加和修改 tag ，采用多项复选框。</p></li></ul><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">教程开始</h3><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">一、数据表的建立</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create tags</code>&nbsp;创建 Tags 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_013927_tags&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%tags}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;$this-&gt;string()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//标签名称\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;//标签描述\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;$this-&gt;string(),&nbsp;&nbsp;&nbsp;&nbsp;//标签图片\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;notNull(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">命令行执行&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">.\\yii migrate/create post_tag_pivot</code>&nbsp;创建 post_tag_pivot 数据表，然后修改目录&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">console\\migrations</code>&nbsp;下生成的文件内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nuse&nbsp;yii\\db\\Migration;\r\n\r\nclass&nbsp;m160818_014008_post_tag_pivot&nbsp;extends&nbsp;Migration\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;up()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;null;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;db-&gt;driverName&nbsp;===&nbsp;&#39;mysql&#39;)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;http://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tableOptions&nbsp;=&nbsp;&#39;CHARACTER&nbsp;SET&nbsp;utf8&nbsp;COLLATE&nbsp;utf8_unicode_ci&nbsp;ENGINE=InnoDB&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createTable(&#39;{{%post_tag_pivot}}&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$this-&gt;primaryKey(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//对应posts表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;&nbsp;=&gt;&nbsp;$this-&gt;integer()-&gt;unsigned()-&gt;notNull(),&nbsp;&nbsp;&nbsp;&nbsp;//对应tags表id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],&nbsp;$tableOptions);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-post_id&#39;,&nbsp;&nbsp;&nbsp;//建立索引的名字\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_id&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//建立索引的键\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;createIndex(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//同上\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idx-post_tag_pivot-tag_id&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;post_tag_pivot&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_id&#39;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;down()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n\r\n\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/*\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Use&nbsp;safeUp/safeDown&nbsp;to&nbsp;run&nbsp;migration&nbsp;code&nbsp;within&nbsp;a&nbsp;transaction\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeUp()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;safeDown()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">数据表就建立完成了。</p><h2 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 16px; white-space: normal; background-color: rgb(255, 255, 255);\">二、tags 表的增删改查</h2><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">打开 Gii 工具。选择 Model Generator。依次建立 tags 和 post_tag_pivot 模型。Namespace 选择 common\\models。之后修改 common\\models 文件夹下 tags 文件内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;common\\models;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;yii\\behaviors\\TimestampBehavior;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\n/**\r\n&nbsp;*&nbsp;This&nbsp;is&nbsp;the&nbsp;model&nbsp;class&nbsp;for&nbsp;table&nbsp;&quot;tags&quot;.\r\n&nbsp;*\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$id\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$meta_description\r\n&nbsp;*&nbsp;@property&nbsp;string&nbsp;$tag_img\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$created_at\r\n&nbsp;*&nbsp;@property&nbsp;integer&nbsp;$updated_at\r\n&nbsp;*/\r\nclass&nbsp;Tags&nbsp;extends&nbsp;\\yii\\db\\ActiveRecord\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;function&nbsp;tableName()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&#39;tags&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimestampBehavior::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;],&nbsp;&#39;required&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag&#39;,&nbsp;&#39;meta_description&#39;,&nbsp;&#39;tag_img&#39;],&nbsp;&#39;string&#39;,&nbsp;&#39;max&#39;&nbsp;=&gt;&nbsp;255],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;attributeLabels()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;&#39;ID&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag&#39;&nbsp;=&gt;&nbsp;&#39;Tag&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;meta_description&#39;&nbsp;=&gt;&nbsp;&#39;Meta&nbsp;Description&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tag_img&#39;&nbsp;=&gt;&nbsp;&#39;Tag&nbsp;Img&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;layout&#39;&nbsp;=&gt;&nbsp;&#39;Layout&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;created_at&#39;&nbsp;=&gt;&nbsp;&#39;Created&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;updated_at&#39;&nbsp;=&gt;&nbsp;&#39;Updated&nbsp;At&#39;,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;TagsQuery&nbsp;the&nbsp;active&nbsp;query&nbsp;used&nbsp;by&nbsp;this&nbsp;AR&nbsp;class.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getPosts()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Posts::className(),[&#39;id&#39;=&gt;&#39;post_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;tag_id&#39;=&gt;&#39;id&#39;])-&gt;where([&#39;status&#39;=&gt;1]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">添加&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">TimestampBehavior</code>&nbsp;行为就不多说了，第一篇有讲。 这里还添加了一个&nbsp;<code style=\"box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;\">getPosts()</code>方法，作用是通过中间表，从tags 表中查询 posts信息，详细了解看手册关于 ActiveRecord（活动记录）部分。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">选择CRUD Generator，生成 tags 表的增删改查。不需要生成 post_tag_pivot 表的增删改查。</p><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">标签上传功能的实现。</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 backend\\models 目录下，新建 TagFrom 模型，作为 tag_img 文件上传的模型，内容如下。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/**\r\n&nbsp;*&nbsp;@Author:&nbsp;Admin\r\n&nbsp;*&nbsp;@Date:&nbsp;&nbsp;&nbsp;2016-08-18&nbsp;13:04:17\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;by:&nbsp;&nbsp;&nbsp;Admin\r\n&nbsp;*&nbsp;@Last&nbsp;Modified&nbsp;time:&nbsp;2016-08-23&nbsp;15:50:54\r\n&nbsp;*&nbsp;@version\r\n&nbsp;*/\r\nnamespace&nbsp;backend\\models;\r\n\r\nuse&nbsp;yii\\base\\Model;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\nclass&nbsp;TagForm&nbsp;extends&nbsp;Model\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;UploadedFile\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$tag;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$meta_description;\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;$tag_img;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;public&nbsp;$layout;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;rules()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[&#39;tag_img&#39;],&nbsp;&#39;file&#39;,&nbsp;&#39;skipOnEmpty&#39;&nbsp;=&gt;&nbsp;false,&nbsp;&#39;extensions&#39;&nbsp;=&gt;&nbsp;&#39;png,&nbsp;jpg&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;upload()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;validate())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randName=date(&quot;Y&quot;).date(&quot;m&quot;).date(&quot;d&quot;).date(&quot;H&quot;).date(&quot;i&quot;).date(&quot;s&quot;).rand(100,&nbsp;999).&#39;-&#39;.md5(microtime());&nbsp;&nbsp;&nbsp;//生成随机文件名\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadPath=&nbsp;&#39;uploads/&#39;&nbsp;.&nbsp;$randName&nbsp;.&nbsp;&#39;.&#39;&nbsp;.&nbsp;$this-&gt;tag_img-&gt;extension;&nbsp;&nbsp;//设置保存路径，&nbsp;为&nbsp;backend\\web\\uploads\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;tag_img-&gt;saveAs($uploadPath);&nbsp;&nbsp;//保存文件\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Url::to(&#39;advanced/backend/web/&#39;.$uploadPath,true);&nbsp;//返回文件的&nbsp;url&nbsp;路径，使用&nbsp;Url&nbsp;帮助类。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改 backend\\controllers 目录下 TagController.php 文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;backend\\models\\TagSearch;\r\nuse&nbsp;backend\\models\\TagForm;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\nuse&nbsp;yii\\web\\UploadedFile;\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n/**\r\n&nbsp;*&nbsp;TagController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Tags&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;TagController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Tags&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;TagSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Tags();&nbsp;&nbsp;//新建&nbsp;Tags&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg,&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;$this-&gt;findModel($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$uploadImg&nbsp;=&nbsp;new&nbsp;TagForm();&nbsp;//新建&nbsp;TagForm&nbsp;模型&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;save($request,$model,$uploadImg))&nbsp;{&nbsp;&nbsp;//&nbsp;调用自定义函数&nbsp;save&nbsp;保存表单信息和上传图片。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;//&nbsp;把&nbsp;TagForm&nbsp;模型上传到前台&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Tags&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Tags&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;Tags&nbsp;the&nbsp;loaded&nbsp;model\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NotFoundHttpException&nbsp;if&nbsp;the&nbsp;model&nbsp;cannot&nbsp;be&nbsp;found\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;function&nbsp;findModel($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(($model&nbsp;=&nbsp;Tags::findOne($id))&nbsp;!==&nbsp;null)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$model;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;NotFoundHttpException(&#39;The&nbsp;requested&nbsp;page&nbsp;does&nbsp;not&nbsp;exist.&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;save($request,$model,$uploadImg)&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;自定义函数\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($request-&gt;isPost)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;$request-&gt;post(&#39;Tags&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag&nbsp;=&nbsp;$tag[&#39;tag&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;meta_description&nbsp;=&nbsp;$tag[&#39;meta_description&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($uploadImg-&gt;tag_img=&nbsp;UploadedFile::getInstance($uploadImg,&nbsp;&#39;tag_img&#39;)){&nbsp;&nbsp;&nbsp;//&nbsp;调用&nbsp;&nbsp;UploadedFile&nbsp;获得上传文件实例传递给&nbsp;&nbsp;&nbsp;$uploadImg-&gt;tag_img\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($uploadPath&nbsp;=&nbsp;$uploadImg-&gt;upload())&nbsp;&nbsp;&nbsp;//上传文件，返回文件路径\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model-&gt;tag_img&nbsp;=&nbsp;$uploadPath;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;save())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">然后修改视图文件</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\_form.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\nuse&nbsp;yii\\widgets\\ActiveForm;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n/*&nbsp;@var&nbsp;$form&nbsp;yii\\widgets\\ActiveForm&nbsp;*/\r\n?&gt;\r\n\r\n&lt;div&nbsp;class=&quot;tags-form&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;$form&nbsp;=&nbsp;ActiveForm::begin([&#39;options&#39;&nbsp;=&gt;&nbsp;[&#39;enctype&#39;&nbsp;=&gt;&nbsp;&#39;multipart/form-data&#39;]]);&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;tag&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;meta_description&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($uploadImg,&nbsp;&#39;tag_img&#39;)-&gt;fileInput()&nbsp;?&gt;&nbsp;&nbsp;&nbsp;&nbsp;//文件输入框\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$form-&gt;field($model,&nbsp;&#39;layout&#39;)-&gt;textInput([&#39;maxlength&#39;&nbsp;=&gt;&nbsp;true])&nbsp;?&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class=&quot;form-group&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;Html::submitButton($model-&gt;isNewRecord&nbsp;?&nbsp;&#39;Create&#39;&nbsp;:&nbsp;&#39;Update&#39;,&nbsp;[&#39;class&#39;&nbsp;=&gt;&nbsp;$model-&gt;isNewRecord&nbsp;?&nbsp;&#39;btn&nbsp;btn-success&#39;&nbsp;:&nbsp;&#39;btn&nbsp;btn-primary&#39;])&nbsp;?&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;ActiveForm::end();&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\create.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Create&nbsp;Tags&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-create&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">//&nbsp;backend\\views\\tag\\update.php\r\n&lt;?php\r\n\r\nuse&nbsp;yii\\helpers\\Html;\r\n\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n/*&nbsp;@var&nbsp;$model&nbsp;common\\models\\Tags&nbsp;*/\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;Update&nbsp;Tags:&nbsp;&#39;&nbsp;.&nbsp;$model-&gt;id;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Tags&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;$model-&gt;id,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;&#39;Update&#39;;\r\n?&gt;\r\n&lt;div&nbsp;class=&quot;tags-update&quot;&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;&lt;?=&nbsp;Html::encode($this-&gt;title)&nbsp;?&gt;&lt;/h1&gt;\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?=&nbsp;$this-&gt;render(&#39;_form&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;uploadImg&#39;=&gt;$uploadImg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//传输&nbsp;TagForm&nbsp;模型。\r\n&nbsp;&nbsp;&nbsp;&nbsp;])&nbsp;?&gt;\r\n\r\n&lt;/div&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">前台建立 Tag 显示</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着在 Gii 选择 Controller Generator。Controller Class 填写 frontend\\controllers\\TagController 。 View Path 填写 @frontend/views/tag。生成控制器文件。<br style=\"box-sizing: border-box;\"/>接着打开 frontend\\controllers\\TagController.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;frontend\\controllers;\r\n\r\nuse&nbsp;common\\models\\Tags;\r\nclass&nbsp;TagController&nbsp;extends&nbsp;\\yii\\web\\Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	&#39;tags&#39;=&gt;$tags]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在修改 frontend\\controllers\\view\\tag\\index.php 文件，修改内容如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\nuse&nbsp;yii\\helpers\\Url;\r\n\r\n$this-&gt;title&nbsp;=&nbsp;&#39;标签&#39;;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;标签&lt;/h1&gt;\r\n\r\n\r\n&lt;div&nbsp;class=&quot;row&quot;&gt;\r\n&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n?&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;col-md-3&quot;&gt;\r\n&nbsp;&nbsp;	&lt;div&nbsp;class=&quot;media&quot;&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-left&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&nbsp;href=&quot;#&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img&nbsp;class=&quot;media-object&quot;&nbsp;width=&quot;54px&quot;&nbsp;height=&quot;54px&quot;&nbsp;src=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag_img&quot;;&nbsp;?&gt;&quot;&nbsp;alt=&quot;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/a&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;div&nbsp;class=&quot;media-body&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;h4&nbsp;class=&quot;media-heading&quot;&gt;&lt;a&nbsp;href=&quot;&lt;?php&nbsp;echo&nbsp;Url::toRoute([&#39;post/index&#39;,&#39;id&#39;=&gt;$tags-&gt;id]);&nbsp;?&gt;&quot;&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;tag&quot;;&nbsp;?&gt;&lt;/a&gt;&lt;/h4&gt;&nbsp;&nbsp;//设置&nbsp;Url&nbsp;，点击标签名时，显示该标签所有的文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;&lt;?php&nbsp;echo&nbsp;&quot;$tags-&gt;meta_description&quot;;&nbsp;?&gt;&lt;/p&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;/div&gt;\r\n&nbsp;&nbsp;&lt;/div&gt;\r\n&lt;?php&nbsp;}&nbsp;?&gt;\r\n&lt;/div&gt;</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">接着修改 frontend\\controllers\\PostController.php 文件的 actionIndex 方法如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">	public&nbsp;function&nbsp;actionIndex($id=&#39;&#39;)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!empty($id))&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=Tags::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;$tags-&gt;getPosts()-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);&nbsp;&nbsp;&nbsp;//根据标签&nbsp;Id&nbsp;查找所有&nbsp;Post\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;	&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;Posts::find()-&gt;where([&#39;status&#39;&nbsp;=&gt;&nbsp;1])-&gt;orderBy([&#39;id&#39;=&gt;SORT_DESC]);\r\n;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;	$countuPosts&nbsp;=&nbsp;clone&nbsp;$posts&nbsp;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pages&nbsp;=&nbsp;new&nbsp;Pagination([&#39;totalCount&#39;&nbsp;=&gt;&nbsp;$countuPosts-&gt;count(),&#39;pageSize&#39;=&gt;5]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$models&nbsp;=&nbsp;$posts-&gt;offset($pages-&gt;offset)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;limit($pages-&gt;limit)\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;all();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;models&#39;&nbsp;=&gt;&nbsp;$models,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;pages&#39;&nbsp;=&gt;&nbsp;$pages,\r\n&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在文章详情页显示标签</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n/*&nbsp;@var&nbsp;$this&nbsp;yii\\web\\View&nbsp;*/\r\n$this-&gt;title&nbsp;=&nbsp;$post-&gt;title;\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;[&#39;label&#39;&nbsp;=&gt;&nbsp;&#39;Posts&#39;,&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;[&#39;index&#39;]];\r\n$this-&gt;params[&#39;breadcrumbs&#39;][]&nbsp;=&nbsp;$this-&gt;title;\r\n?&gt;\r\n&lt;h1&gt;&lt;?php&nbsp;echo&nbsp;&nbsp;$post-&gt;title;&nbsp;?&gt;&lt;/h1&gt;\r\n&lt;p&nbsp;class=&quot;text-muted&quot;&gt;作者：&lt;?php&nbsp;echo&nbsp;$post-&gt;author;&nbsp;?&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;标签:&lt;?php&nbsp;foreach&nbsp;($tags&nbsp;as&nbsp;$tags)&nbsp;{\r\n	echo&nbsp;&quot;&lt;kbd&gt;&quot;.$tags[&#39;tag&#39;].&quot;&lt;/kbd&gt;&amp;nbsp;&amp;nbsp;&quot;;\r\n}&nbsp;?&gt;&lt;/p&gt;\r\n&lt;p&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;?php&nbsp;echo&nbsp;yii\\helpers\\Markdown::process($post-&gt;content,&nbsp;&#39;gfm&#39;);&nbsp;?&gt;\r\n&lt;/p&gt;</pre><h3 style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">新建 post 表时添加 tag</h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">在 common\\models\\Posts.php 下添加 getTags 方法 中间表查询。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&nbsp;public&nbsp;function&nbsp;getTags()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;hasMany(Tags::className(),[&#39;id&#39;=&gt;&#39;tag_id&#39;])-&gt;viaTable(&#39;post_tag_pivot&#39;,[&#39;post_id&#39;=&gt;&#39;id&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-size: 14px; white-space: normal; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Hiragino Sans GB W3&quot;, &quot;WenQuanYi Micro Hei&quot;, &quot;Microsoft YaHei UI&quot;, &quot;Microsoft YaHei&quot;, sans-serif; line-height: 20px; background-color: rgb(255, 255, 255);\">修改 backend\\controllers\\PostContrlloer.php 内容如下</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(240, 240, 240); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">&lt;?php\r\n\r\nnamespace&nbsp;backend\\controllers;\r\n\r\nuse&nbsp;Yii;\r\nuse&nbsp;common\\models\\Posts;\r\nuse&nbsp;common\\models\\Tags;\r\nuse&nbsp;common\\models\\PostTagPivot;\r\nuse&nbsp;backend\\models\\PostsSearch;\r\nuse&nbsp;yii\\web\\Controller;\r\nuse&nbsp;yii\\web\\NotFoundHttpException;\r\nuse&nbsp;yii\\filters\\VerbFilter;\r\n\r\n/**\r\n&nbsp;*&nbsp;PostController&nbsp;implements&nbsp;the&nbsp;CRUD&nbsp;actions&nbsp;for&nbsp;Posts&nbsp;model.\r\n&nbsp;*/\r\nclass&nbsp;PostController&nbsp;extends&nbsp;Controller\r\n{\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@inheritdoc\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionSeeder(){\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$faker&nbsp;=&nbsp;\\Faker\\Factory::create(&#39;zh_CN&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a=0;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;($i=0;&nbsp;$i&nbsp;&lt;20&nbsp;;&nbsp;$i++)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;title&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;20);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;author&nbsp;=&nbsp;$faker-&gt;name;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$posts-&gt;content&nbsp;=&nbsp;$faker-&gt;text($maxNbChars&nbsp;=&nbsp;3000);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($posts-&gt;insert())&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a+=1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;&quot;添加&quot;.$a.&quot;条数据&quot;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;behaviors()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;verbs&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;VerbFilter::className(),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;actions&#39;&nbsp;=&gt;&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;delete&#39;&nbsp;=&gt;&nbsp;[&#39;POST&#39;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Lists&nbsp;all&nbsp;Posts&nbsp;models.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionIndex()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$searchModel&nbsp;=&nbsp;new&nbsp;PostsSearch();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dataProvider&nbsp;=&nbsp;$searchModel-&gt;search(Yii::$app-&gt;request-&gt;queryParams);\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;index&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;searchModel&#39;&nbsp;=&gt;&nbsp;$searchModel,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dataProvider&#39;&nbsp;=&gt;&nbsp;$dataProvider,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Displays&nbsp;a&nbsp;single&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionView($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;view&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$this-&gt;findModel($id),\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;new&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;creation&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionCreate()&nbsp;&nbsp;//创建&nbsp;post&nbsp;时，查找所有标签，提供选择\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;new&nbsp;Posts();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();&nbsp;&nbsp;//查找所有标签\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=&quot;&quot;;&nbsp;&nbsp;//已选择的标签，由于新建标签所以&nbsp;&nbsp;$checkTags&nbsp;为空。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($model-&gt;attributes[&#39;id&#39;],$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//新建&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;create&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,&nbsp;&nbsp;//传递所有标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,&nbsp;//传递已选择标签到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Updates&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;update&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;view&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionUpdate($id)&nbsp;&nbsp;&nbsp;//修改&nbsp;post&nbsp;时，查找所有标签，并查找改&nbsp;post&nbsp;的&nbsp;tag&nbsp;传到前台\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model&nbsp;=&nbsp;Posts::findOne($id);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTag&nbsp;=&nbsp;&nbsp;$model-&gt;tags;&nbsp;&nbsp;//根据&nbsp;post&nbsp;的&nbsp;id&nbsp;查找已选择的&nbsp;tag\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tags&nbsp;=&nbsp;Tags::find()-&gt;all();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$request&nbsp;=&nbsp;Yii::$app-&gt;request;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags=array();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(&nbsp;$checkTag&nbsp;as&nbsp;$checkTag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$checkTags[]=$checkTag-&gt;id;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//把查找到的&nbsp;$checkTag&nbsp;提取出已选择&nbsp;tag&nbsp;的&nbsp;id。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($model-&gt;load($request-&gt;post())&nbsp;&amp;&amp;&nbsp;$model-&gt;save()&nbsp;&amp;&amp;&nbsp;$this-&gt;saveTag($id,$request-&gt;post(&#39;tags&#39;)))&nbsp;{&nbsp;&nbsp;//修改&nbsp;post&nbsp;时获得&nbsp;post&nbsp;的id，然后通过自定义方法&nbsp;saveTag&nbsp;保存&nbsp;tags\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;view&#39;,&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$model-&gt;id]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;render(&#39;update&#39;,&nbsp;[\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;model&#39;&nbsp;=&gt;&nbsp;$model,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;=&gt;&nbsp;$tags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;checkTags&#39;=&gt;$checkTags,\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;saveTag($id,$checkTag)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostTagPivot::deleteAll(&quot;post_id&nbsp;=&nbsp;$id&quot;);&nbsp;&nbsp;&nbsp;//首先根据&nbsp;post&nbsp;的&nbsp;id&nbsp;删除&nbsp;Post_Tag_Pivot&nbsp;表建立的关系\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($checkTag)&nbsp;{&nbsp;&nbsp;&nbsp;//根据前台传回来的选择写入数据库。\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($checkTag&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot&nbsp;=&nbsp;new&nbsp;PostTagPivot();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;post_id&nbsp;=&nbsp;$id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;tag_id&nbsp;=&nbsp;$value;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$PostTagPivot-&gt;insert();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Deletes&nbsp;an&nbsp;existing&nbsp;Posts&nbsp;model.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;deletion&nbsp;is&nbsp;successful,&nbsp;the&nbsp;browser&nbsp;will&nbsp;be&nbsp;redirected&nbsp;to&nbsp;the&nbsp;&#39;index&#39;&nbsp;page.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;actionDelete($id)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;findModel($id)-&gt;delete();\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;redirect([&#39;index&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;Posts&nbsp;model&nbsp;based&nbsp;on&nbsp;its&nbsp;primary&nbsp;key&nbsp;value.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;model&nbsp;is&nbsp;not&nbsp;found,&nbsp;a&nbsp;404&nbsp;HTTP&nbsp;exception&nbsp;will&nbsp;be&nbsp;thrown.\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;integer&nbsp;$id\r\n&nb',1,1478151286,1,1478151286,0,''),(18,2,'片段缓存','片段缓存文档地址：http://www.yii-china.com/doc/guide/caching_fragment.html对于片段缓存的用法，在文档中已经写得很清楚，我这边','<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\"><strong style=\"box-sizing: border-box;\">片段缓存</strong><br style=\"box-sizing: border-box;\"/></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">文档地址：http://www.yii-china.com/doc/guide/caching_fragment.html</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">对于片段缓存的用法，在文档中已经写得很清楚，我这边做一个简单的例子，更形象的在讲解一下，片段缓存在实际项目中是如何运用的。<br style=\"box-sizing: border-box;\"/></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">基本结构如下：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">if&nbsp;($this-&gt;beginCache($id))&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...&nbsp;在此生成内容&nbsp;...\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;endCache();\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">$id可以为任意字符串。</p><h3 style=\"box-sizing: border-box; font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-weight: 500; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 24px; white-space: normal; background-color: rgb(255, 255, 255);\"><span style=\"box-sizing: border-box; font-size: 16px;\">过期时间（duration）</span></h3><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\"><span style=\"box-sizing: border-box; font-size: 16px;\"></span></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">或许片段缓存中最常用的一个配置选项就是 yii\\widgets\\FragmentCache::duration 了。它指定了内容被缓存的秒数。以下代码缓存内容最多一小时：</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">if&nbsp;($this-&gt;beginCache($id,&nbsp;[&#39;duration&#39;&nbsp;=&gt;&nbsp;3600]))&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...&nbsp;在此生成内容&nbsp;...\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;endCache();\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">如果该选项未设置，则默认为 0，永不过期。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\"><strong style=\"box-sizing: border-box;\">依赖</strong></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">和[数据缓存]一样，片段缓存的内容一样可以设置缓存依赖。例如一段被缓存的文章，是否重新缓存取决于它是否被修改过。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">通过设置 yii\\widgets\\FragmentCache::dependency 选项来指定依赖，该选项的值可以是一个 yii\\caching\\Dependency 类的派生类，也可以是创建缓存对象的配置数组。以下代码指定了一个片段缓存，它依赖于&nbsp;update_at&nbsp;字段是否被更改过的。</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">$dependency&nbsp;=&nbsp;[&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;&#39;yii\\caching\\DbDependency&#39;,&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&#39;sql&#39;&nbsp;=&gt;&nbsp;&#39;SELECT&nbsp;MAX(updated_at)&nbsp;FROM&nbsp;post&#39;,\r\n];\r\n\r\nif&nbsp;($this-&gt;beginCache($id,&nbsp;[&#39;dependency&#39;&nbsp;=&gt;&nbsp;$dependency]))&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...&nbsp;在此生成内容&nbsp;...\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;endCache();\r\n}</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">此处的依赖，也可以选用yii\\caching\\TagDependency类</p><pre style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">$dependency&nbsp;=&nbsp;[&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&#39;class&#39;&nbsp;=&gt;&nbsp;&#39;yii\\caching\\TagDependency&#39;,&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&#39;tags&#39;&nbsp;=&gt;&nbsp;&#39;key&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//此处为自定义方法：获取生成的tag\r\n];</pre><pre class=\"brush:php;toolbar:false\" style=\"box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; padding: 9.5px; margin-top: 0px; margin-bottom: 10px; line-height: 1.42857; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px;\">\\yii\\caching\\TagDependency::invalidate(\\Yii::$app-&gt;cache,&nbsp;&#39;key&#39;);</pre><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 微软雅黑, &quot;Helvetica Neue&quot;, Helvetica, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft Yahei&quot;, sans-serif; font-size: 14px; white-space: normal; background-color: rgb(255, 255, 255);\">通过invalidate()方法来更新缓存</p>',1,1478153563,1,1478153563,0,'/image/20161103/1478153531784082.jpg');

/*Table structure for table `hs_post_extends` */

DROP TABLE IF EXISTS `hs_post_extends`;

CREATE TABLE `hs_post_extends` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '自增ID',
  `post_id` int(10) unsigned NOT NULL COMMENT '文章',
  `browser` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '浏览量',
  `collect` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '收藏量',
  `praise` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '点赞',
  `comment` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '评论数',
  PRIMARY KEY (`id`),
  UNIQUE KEY `post_id_unique` (`post_id`),
  CONSTRAINT `FK_hs_post_extends` FOREIGN KEY (`post_id`) REFERENCES `hs_post` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COMMENT='文章扩展表';

/*Data for the table `hs_post_extends` */

insert  into `hs_post_extends`(`id`,`post_id`,`browser`,`collect`,`praise`,`comment`) values (1,17,3,0,0,0),(2,16,2,0,0,0);

/*Table structure for table `hs_post_tags` */

DROP TABLE IF EXISTS `hs_post_tags`;

CREATE TABLE `hs_post_tags` (
  `post_id` int(10) unsigned DEFAULT NULL,
  `tag_id` int(10) unsigned DEFAULT NULL,
  KEY `FK_hs_post_tags_to_post` (`post_id`),
  KEY `FK_hs_post_tags_to_tags` (`tag_id`),
  CONSTRAINT `FK_hs_post_tags_to_post` FOREIGN KEY (`post_id`) REFERENCES `hs_post` (`id`),
  CONSTRAINT `FK_hs_post_tags_to_tags` FOREIGN KEY (`tag_id`) REFERENCES `hs_tags` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `hs_post_tags` */

insert  into `hs_post_tags`(`post_id`,`tag_id`) values (16,1),(16,2),(16,3),(16,4),(17,1),(17,3),(17,5),(18,6),(18,7),(18,8);

/*Table structure for table `hs_tags` */

DROP TABLE IF EXISTS `hs_tags`;

CREATE TABLE `hs_tags` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `tag_name` varchar(255) NOT NULL,
  `post_num` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `tag_name` (`tag_name`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;

/*Data for the table `hs_tags` */

insert  into `hs_tags`(`id`,`tag_name`,`post_num`) values (1,'标签1',2),(2,'标签2',1),(3,'标签3',2),(4,'标签4',1),(5,'PHP',1),(6,'Yii2',1),(7,'缓存',1),(8,'优化',1);

/*Table structure for table `hs_user` */

DROP TABLE IF EXISTS `hs_user`;

CREATE TABLE `hs_user` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '昵称',
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT '电子邮箱',
  `auth_key` varchar(32) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT 'auth_key',
  `password_hash` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '密码Hash',
  `password_reset_token` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT '密码重置命牌',
  `created_at` int(10) unsigned DEFAULT NULL COMMENT '注册日期',
  `updated_at` int(10) unsigned DEFAULT '0' COMMENT '更新日期',
  `last_login_ip` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后登录地址',
  `last_login_time` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '最后登录时间',
  `status` smallint(1) DEFAULT '0' COMMENT '用户状态',
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
  UNIQUE KEY `password_reset_token` (`password_reset_token`),
  UNIQUE KEY `username_unique` (`username`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `hs_user` */

insert  into `hs_user`(`id`,`username`,`email`,`auth_key`,`password_hash`,`password_reset_token`,`created_at`,`updated_at`,`last_login_ip`,`last_login_time`,`status`) values (1,'jjxboy','jjxboy@163.com','','$2y$13$Sk2jAXxBoahC/lZESE9zZe5YsSCth.h0gOy264PNQMsuVnagIBW0u',NULL,1478057333,1478063476,2130706433,1478063475,1),(2,'jsparrow','jsparrow@aliyun.com','','$2y$13$9vp.P77qZXWl3uuBlfmhcuPjcwtoNyHK0PT.p8YwFHTiw6SVaDZ9C',NULL,1478069714,1478069714,0,0,1),(3,'jsparrow1','jsparrow1@aliyun.com','','$2y$13$Tsx7LJx3gH5JVuESzkLYDOLzjluPTmKUO7yQVqs59AS32zm2HI2W.',NULL,1478069790,1478069790,0,0,1),(4,'bill','bill@163.com','','$2y$13$GnaFPks3cQd0lQYHutBKa.NWA3QnoqkDuQIsKTLjF5oV0MHYJxWAm',NULL,1478070142,1478070142,0,0,1),(5,'gates','gates@ggg.com','','$2y$13$FyYenRvb17ZmZ8cewy8qC.aDj2Hva7hMyBeA8HttQbjVSSnL8p8Va',NULL,1478070490,1478070490,0,0,1),(6,'jjx','jjx@jjx.com','','$2y$13$mvDcBpchzHj3A9PxJgagX.xutUtUtNzG9vcEGK.Y7fj4baeC29Laa',NULL,1478070642,1478070642,0,0,1),(7,'xxx','xxx@xxx.com','','$2y$13$aBaJTw4y7z2I3tMGyIkxhOCzUyNU1nulSYt/8D4jVn.fGalW64hae',NULL,1478070960,1478070960,0,0,1);

/*Table structure for table `user` */

DROP TABLE IF EXISTS `user`;

CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `auth_key` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `password_hash` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `password_reset_token` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `status` smallint(6) NOT NULL DEFAULT '10',
  `created_at` int(11) NOT NULL,
  `updated_at` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `email` (`email`),
  UNIQUE KEY `password_reset_token` (`password_reset_token`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

/*Data for the table `user` */

insert  into `user`(`id`,`username`,`auth_key`,`password_hash`,`password_reset_token`,`email`,`status`,`created_at`,`updated_at`) values (1,'jsparrow','pG7TRyTIXlEbcenpi34TzmMYS2zDsMTF','$2y$13$HtJqGRmc76KIRIwokii8AOQ1XZljXiuWCKUGFnH9vkTnfBpHtqgFu',NULL,'weixi@weixistyle.com',10,1462597929,1462597929);

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
